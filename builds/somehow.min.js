!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).somehow=n()}(this,function(){"use strict";function t(n){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(n)}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}function r(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&a(t,n)}function o(t){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,n){return(a=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function s(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}function u(t,n){return n||(n=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(n)}}))}var h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(){throw new Error("Dynamic requires are not currently supported by rollup-plugin-commonjs")}function l(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function f(t,n){return t(n={exports:{}},n.exports),n.exports}var d=f(function(t,n){t.exports=function t(n,e,i){function r(a,s){if(!e[a]){if(!n[a]){if(!s&&c)return c();if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[a]={exports:{}};n[a][0].call(h.exports,function(t){return r(n[a][1][t]||t)},h,h.exports,t,n,e,i)}return e[a].exports}for(var o=c,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,n,e){var i=[{names:["square","1:1","instagram"],description:"Square",decimal:1,orientation:"landscape"},{names:["4:3","fullscreen","four three","1.33:1","ipad","pythagorean"],description:"Traditional TVs",decimal:1.333333,orientation:"landscape"},{names:["a4","√2:1","paper","lichtenberg","1:1.41"],description:"A4 paper",decimal:1.41},{names:["imax","1.43:1"],description:"IMAX film",decimal:1.43,orientation:"landscape"},{names:["3:2","35mm","photo","1.5:1","1.5"],description:"35mm photos",decimal:1.5,orientation:"landscape"},{names:["business card","bank card","1.58:1"],description:"Bank Cards",decimal:1.58577,orientation:"landscape"},{names:["golden","kepler","1.618","1.6:1"],description:"Golden ratio",decimal:1.61803,orientation:"landscape"},{names:["16:9","hd","hdtv","fhd","tv","computer","iphone","4k","8k","1.78:1"],description:"HD video",decimal:1.77777,orientation:"landscape"},{names:["widescreen","1.85:1"],description:"Movie-theatres",decimal:1.85,orientation:"landscape"},{names:["2:1","univisium","mobile","18:9"],description:"2:1",decimal:2,orientation:"landscape"},{names:["cinemascope","widescreen","wide","2.35:1","2.39:1"],description:"Widescreen",decimal:2.35,orientation:"landscape"},{names:["silver","1 + √2","2.41:1"],description:"Silver ratio",decimal:2.41,orientation:"landscape"}],r=i.map(function(t){return(t=Object.assign({},t)).decimal=1/t.decimal,t.orientation="portrait",t}),o={};i.forEach(function(t){t.names.forEach(function(n){o[n]=t})}),n.exports={lookup:o,portraits:r,list:i}},{}],2:[function(t,n,e){var i=t("./aspects");n.exports=function(t,n){var e=t/n;return(e=parseInt(100*e,10)/100)<1?function(t,n){for(var e=0;e<n.length;e+=1)if(t>n[e].decimal){if(n[e-1]){var i=Math.abs(t-n[e].decimal);if(Math.abs(t-n[e-1].decimal)<i)return n[e-1]}return n[e]}return n[n.length-1]}(e,i.portraits):function(t,n){for(var e=0;e<n.length;e+=1)if(t<=n[e].decimal){if(n[e-1]){var i=Math.abs(t-n[e].decimal);if(Math.abs(t-n[e-1].decimal)<i)return n[e-1]}return n[e]}return n[n.length-1]}(e,i.list)}},{"./aspects":1}],3:[function(t,n,e){var i=function(t,n){var e=1/n.decimal,i=t.orientation||"landscape";"portrait"===i&&(e=1/e);var r=t.width*e;return r=Math.round(r),{closest:n,width:t.width,height:r,orientation:i,original:t}},r=function(t,n){var e=n.decimal,i=t.orientation||"landscape";"portrait"===i&&(e=1/e);var r=t.height*e;return{closest:n,width:r=Math.round(r),height:t.height,orientation:i,original:t}};n.exports={both:function(t,n){var e=r(t,n);return e.width>t.width?i(t,n):e},width:r,height:i}},{}],4:[function(t,n,e){(function(e){var i=t("./find-best-ratio"),r=t("./parse-ratio"),o=t("./fit"),a=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};if(!t.aspect&&!t.ratio){var n=i(t.width,t.height),e=1/n.decimal,a=t.width*e,s=(a-t.height)/t.height;return s=parseInt(1e3*s,10)/10,a=Math.round(a),{closest:n,percent_change:s,width:t.width,height:a}}var u=r(t.aspect||t.ratio||"");return null===u?(console.error("find-aspect-ratio error: Could not find a given aspect ratio."),t):"number"==typeof t.width&&"number"==typeof t.height?o.both(t,u):"number"==typeof t.width?o.height(t,u):"number"==typeof t.height?o.width(t,u):(console.error("find-aspect-ratio error: Please supply a height, width, or ratio value."),t)};"undefined"!=typeof self?self.nlp=a:"undefined"!=typeof window?window.nlp=a:void 0!==e&&(e.nlp=a),void 0!==n&&(n.exports=a)}).call(this,void 0!==h?h:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./find-best-ratio":2,"./fit":3,"./parse-ratio":5}],5:[function(t,n,e){var i=t("./aspects"),r=/^[0-9\.]+:[0-9\.]+$/;n.exports=function(t){if(t=(t=(t=(t=t.toLowerCase()).trim()).replace(" ratio","")).replace("-"," "),!0===i.lookup.hasOwnProperty(t))return i.lookup[t];if(!0!==r.test(t))return null;var n=t.split(":");return{description:"custom",decimal:parseFloat(n[0])/parseFloat(n[1])}}},{"./aspects":1}]},{},[4])(4)}),y=f(function(t){var n,e,i,r,o;n=function t(n,e,i,r){for(var o=1;o<e.length;o++){var a=e[o],s="number"==typeof a?i[a]:a,u=e[++o];1===u?r[0]=s:3===u?r[1]=Object.assign(r[1]||{},s):5===u?(r[1]=r[1]||{})[e[++o]]=s:6===u?r[1][e[++o]]+=s+"":r.push(u?n.apply(null,t(n,s,i,["",null])):s)}return r},e=function(t){for(var n,e,i=1,r="",o="",a=[0],s=function(t){1===i&&(t||(r=r.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?a.push(t||r,0):3===i&&(t||r)?(a.push(t||r,1),i=2):2===i&&"..."===r&&t?a.push(t,3):2===i&&r&&!t?a.push(!0,5,r):i>=5&&((r||!t&&5===i)&&(a.push(r,i,e),i=6),t&&(a.push(t,i,e),i=6)),r=""},u=0;u<t.length;u++){u&&(1===i&&s(),s(u));for(var h=0;h<t[u].length;h++)n=t[u][h],1===i?"<"===n?(s(),a=[a],i=3):r+=n:4===i?"--"===r&&">"===n?(i=1,r=""):r=n+r[0]:o?n===o?o="":r+=n:'"'===n||"'"===n?o=n:">"===n?(s(),i=1):i&&("="===n?(i=5,e=r,r=""):"/"===n&&(i<5||">"===t[u][h+1])?(s(),3===i&&(a=a[0]),i=a,(a=a[0]).push(i,2),i=0):" "===n||"\t"===n||"\n"===n||"\r"===n?(s(),i=2):r+=n),3===i&&"!--"===r&&(i=4,a=a[0])}return s(),a},i="function"==typeof Map,r=i?new Map:{},o=i?function(t){var n=r.get(t);return n||r.set(t,n=e(t)),n}:function(t){for(var n="",i=0;i<t.length;i++)n+=t[i].length+"-"+t[i];return r[n]||(r[n]=e(t))},t.exports=function(t){var e=n(this,o(t),arguments,[]);return e.length>1?e:e[0]}}),p=f(function(t,n){var e,i,r,o;t.exports=(e=["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],i=function(t){return String(t).replace(/[&<>"']/g,function(t){return"&"+r[t]+";"})},r={"&":"amp","<":"lt",">":"gt",'"':"quot","'":"apos"},o={},function(t,n){for(var r=[],a=arguments.length;a-- >2;)r.push(arguments[a]);if("function"==typeof t)return(n||(n={})).children=r.reverse(),t(n);var s="<"+t;if(n)for(var u in n)!1!==n[u]&&null!=n[u]&&(s+=" "+i(u)+'="'+i(n[u])+'"');if(-1===e.indexOf(t)){for(s+=">";r.length;){var h=r.pop();if(h)if(h.pop)for(var c=h.length;c--;)r.push(h[c]);else s+=!0===o[h]?h:i(h)}s+="</"+t+">"}else s+=">";return o[s]=!0,s})}),v=f(function(t,n){t.exports=function(){var t,n=function(t,n){return t(n={exports:{}},n.exports),n.exports}(function(t,n){n.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},n.isDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.valueOf())},n.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},n.isObject=function(t){return"[object Object]"===Object.prototype.toString.call(t)},n.zeroPad=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e="0";return(t+="").length>=n?t:new Array(n-t.length+1).join(e)+t},n.titleCase=function(t){return t?t[0].toUpperCase()+t.substr(1):""},n.ordinal=function(t){var n=t%10,e=t%100;return 1===n&&11!==e?t+"st":2===n&&12!==e?t+"nd":3===n&&13!==e?t+"rd":t+"th"},n.toCardinal=function(t){return t=(t=String(t)).replace(/([0-9])(st|nd|rd|th)$/i,"$1"),parseInt(t,10)},n.normalize=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"day"===(t=(t=(t=(t=t.toLowerCase().trim()).replace(/ies$/,"y")).replace(/s$/,"")).replace(/-/g,""))?"date":t},n.getEpoch=function(t){return"number"==typeof t?t:n.isDate(t)?t.getTime():t.epoch?t.epoch:null},n.beADate=function(t,e){return!1===n.isObject(t)?e.clone().set(t):t},n.formatTimezone=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=Math.abs(t),r=t>0?"+":"-";return"".concat(r).concat(n.zeroPad(i)).concat(e,"00")}}),e=(n.isLeapYear,n.isDate,n.isArray,n.isObject,n.zeroPad,n.titleCase,n.ordinal,n.toCardinal,n.normalize,n.getEpoch,n.beADate,n.formatTimezone,n.zeroPad),i=function(t,n,i,r){var o=new Date(t),a=(o.getTimezoneOffset()||0)+60*r;a=60*a*1e3;var s=function(t){return e(t.getMonth()+1)+"/"+e(t.getDate())+":"+e(t.getHours())}(o=new Date(t+a));return s>=n&&s<i},r=function(t){var n=t.timezones[t.tz];if(void 0===n)return console.warn("Warning: couldn't find timezone "+t.tz),0;if(void 0===n.dst)return n.offset;var e=n.offset,r=n.offset+1;"n"===n.hem&&(r=e-1);var o=n.dst.split("->");return!0===i(t.epoch,o[0],o[1],e)?e:r},o=["africa","america","asia","atlantic","australia","brazil","canada","chile","europe","indian","mexico","pacific","antarctica","etc"],a=(t=Object.freeze({default:{"9|s":"2/dili,2/jayapura","9|n":"2/chita,2/khandyga,2/pyongyang,2/seoul,2/tokyo,11/palau","9.5|s|04/07:03->10/06:02":"4/adelaide,4/broken_hill,4/south,4/yancowinna","9.5|s":"4/darwin,4/north","8|s":"12/casey,2/kuala_lumpur,2/makassar,2/singapore,4/perth,4/west","8|n|03/25:03->09/29:23":"2/ulan_bator","8|n":"2/brunei,2/choibalsan,2/chongqing,2/chungking,2/harbin,2/hong_kong,2/irkutsk,2/kuching,2/macao,2/macau,2/manila,2/shanghai,2/taipei,2/ujung_pandang,2/ulaanbaatar","8.75|s":"4/eucla","7|s":"12/davis,2/jakarta,9/christmas","7|n":"2/bangkok,2/barnaul,2/ho_chi_minh,2/hovd,2/krasnoyarsk,2/novokuznetsk,2/novosibirsk,2/phnom_penh,2/pontianak,2/saigon,2/tomsk,2/vientiane","6|s":"12/vostok","6|n":"2/almaty,2/bishkek,2/dacca,2/dhaka,2/kashgar,2/omsk,2/qyzylorda,2/thimbu,2/thimphu,2/urumqi,9/chagos","6.5|n":"2/rangoon,9/cocos","5|s":"12/mawson,9/kerguelen","5|n":"2/aqtau,2/aqtobe,2/ashgabat,2/ashkhabad,2/atyrau,2/baku,2/dushanbe,2/karachi,2/oral,2/samarkand,2/tashkent,2/yekaterinburg,9/maldives","5.75|n":"2/kathmandu,2/katmandu","5.5|n":"2/calcutta,2/colombo,2/kolkata","4|s":"9/reunion","4|n":"2/dubai,2/muscat,2/tbilisi,2/yerevan,8/astrakhan,8/samara,8/saratov,8/ulyanovsk,8/volgograd,2/volgograd,9/mahe,9/mauritius","4.5|n|03/22:00->09/21:24":"2/tehran","4.5|n":"2/kabul","3|s":"12/syowa,9/antananarivo","3|n|03/31:03->10/27:04":"2/nicosia,8/athens,8/bucharest,8/helsinki,8/kiev,8/mariehamn,8/nicosia,8/riga,8/sofia,8/tallinn,8/uzhgorod,8/vilnius,8/zaporozhye","3|n|03/31:02->10/27:03":"8/chisinau,8/tiraspol","3|n|03/31:00->10/26:24":"2/beirut","3|n|03/29:02->10/27:02":"2/jerusalem,2/tel_aviv","3|n|03/29:00->10/25:01":"2/amman","3|n|03/29:00->10/24:24":"2/damascus","3|n|03/23:01->10/26:01":"2/gaza,2/hebron","3|n":"0/addis_ababa,0/asmara,0/asmera,0/dar_es_salaam,0/djibouti,0/juba,0/kampala,0/mogadishu,0/nairobi,2/aden,2/baghdad,2/bahrain,2/istanbul,2/kuwait,2/qatar,2/riyadh,8/istanbul,8/kirov,8/minsk,8/moscow,8/simferopol,9/comoro,9/mayotte","2|s|03/31:02->10/27:02":"12/troll","2|s":"0/gaborone,0/harare,0/johannesburg,0/lubumbashi,0/lusaka,0/maputo,0/maseru,0/mbabane","2|n|03/31:02->10/27:03":"0/ceuta,arctic/longyearbyen,3/jan_mayen,8/amsterdam,8/andorra,8/belgrade,8/berlin,8/bratislava,8/brussels,8/budapest,8/busingen,8/copenhagen,8/gibraltar,8/ljubljana,8/luxembourg,8/madrid,8/malta,8/monaco,8/oslo,8/paris,8/podgorica,8/prague,8/rome,8/san_marino,8/sarajevo,8/skopje,8/stockholm,8/tirane,8/vaduz,8/vatican,8/vienna,8/warsaw,8/zagreb,8/zurich","2|n":"0/blantyre,0/bujumbura,0/cairo,0/khartoum,0/kigali,0/tripoli,8/kaliningrad","1|s|04/02:01->09/03:03":"0/windhoek","1|s":"0/kinshasa,0/luanda","1|n|05/05:03->06/09:02":"0/casablanca,0/el_aaiun","1|n|03/31:01->10/27:02":"3/canary,3/faeroe,3/faroe,3/madeira,8/belfast,8/dublin,8/guernsey,8/isle_of_man,8/jersey,8/lisbon,8/london","1|n":"0/algiers,0/bangui,0/brazzaville,0/douala,0/lagos,0/libreville,0/malabo,0/ndjamena,0/niamey,0/porto-novo,0/tunis","14|n":"11/kiritimati","13|s|04/07:04->09/29:03":"11/apia","13|s|01/15:02->11/05:03":"11/tongatapu","13|n":"11/enderbury,11/fakaofo","12|s|04/07:03->09/29:02":"12/mcmurdo,12/south_pole,11/auckland","12|s|01/13:03->11/03:02":"11/fiji","12|n":"2/anadyr,2/kamchatka,2/srednekolymsk,11/funafuti,11/kwajalein,11/majuro,11/nauru,11/tarawa,11/wake,11/wallis","12.75|s|04/07:03->04/07:02":"11/chatham","11|s":"12/macquarie,11/bougainville","11|n":"2/magadan,2/sakhalin,11/efate,11/guadalcanal,11/kosrae,11/noumea,11/pohnpei,11/ponape","11.5|n":"11/norfolk","10|s|04/07:03->10/06:02":"4/act,4/canberra,4/currie,4/hobart,4/melbourne,4/nsw,4/sydney,4/tasmania,4/victoria","10|s":"12/dumontdurville,4/brisbane,4/lindeman,4/queensland","10|n":"2/ust-nera,2/vladivostok,2/yakutsk,11/chuuk,11/guam,11/port_moresby,11/saipan,11/truk,11/yap","10.5|s|04/07:01->10/06:02":"4/lhi,4/lord_howe","0|n|03/31:00->10/27:01":"1/scoresbysund,3/azores","0|n":"0/abidjan,0/accra,0/bamako,0/banjul,0/bissau,0/conakry,0/dakar,0/freetown,0/lome,0/monrovia,0/nouakchott,0/ouagadougou,0/sao_tome,0/timbuktu,1/danmarkshavn,3/reykjavik,3/st_helena,13/gmt,13/gmt+0,13/gmt-0,13/gmt0,13/greenwich,13/utc,13/universal,13/zulu","-9|n|03/10:02->11/03:02":"1/adak,1/atka","-9|n":"11/gambier","-9.5|n":"11/marquesas","-8|n|03/10:02->11/03:02":"1/anchorage,1/juneau,1/metlakatla,1/nome,1/sitka,1/yakutat","-8|n":"11/pitcairn","-7|n|03/10:02->11/03:02":"1/dawson,1/ensenada,1/los_angeles,1/santa_isabel,1/tijuana,1/vancouver,1/whitehorse,6/pacific,6/yukon,10/bajanorte","-7|n":"1/creston,1/dawson_creek,1/hermosillo,1/phoenix","-6|s|04/06:22->09/07:22":"7/easterisland,11/easter","-6|n|04/07:02->10/27:02":"1/chihuahua,1/mazatlan,10/bajasur","-6|n|03/10:02->11/03:02":"1/boise,1/cambridge_bay,1/denver,1/edmonton,1/inuvik,1/ojinaga,1/shiprock,1/yellowknife,6/mountain","-6|n":"1/belize,1/costa_rica,1/el_salvador,1/guatemala,1/managua,1/regina,1/swift_current,1/tegucigalpa,6/east-saskatchewan,6/saskatchewan,11/galapagos","-5|s":"1/lima,1/rio_branco,5/acre","-5|n|04/07:02->10/27:02":"1/bahia_banderas,1/merida,1/mexico_city,1/monterrey,10/general","-5|n|03/12:03->11/05:01":"1/north_dakota","-5|n|03/10:02->11/03:02":"1/chicago,1/knox_in,1/matamoros,1/menominee,1/rainy_river,1/rankin_inlet,1/resolute,1/winnipeg,6/central","-5|n":"1/atikokan,1/bogota,1/cancun,1/cayman,1/coral_harbour,1/eirunepe,1/guayaquil,1/jamaica,1/panama,1/porto_acre","-4|s|05/13:23->08/13:01":"12/palmer","-4|s|04/06:24->09/08:00":"1/santiago,7/continental","-4|s|03/23:24->10/06:00":"1/asuncion","-4|s|02/16:24->11/03:00":"1/campo_grande,1/cuiaba","-4|s":"1/la_paz,1/manaus,5/west","-4|n|03/12:03->11/05:01":"1/indiana,1/kentucky","-4|n|03/10:02->11/03:02":"1/detroit,1/fort_wayne,1/grand_turk,1/indianapolis,1/iqaluit,1/louisville,1/montreal,1/nassau,1/new_york,1/nipigon,1/pangnirtung,1/port-au-prince,1/thunder_bay,1/toronto,6/eastern","-4|n|03/10:00->11/03:01":"1/havana","-4|n":"1/anguilla,1/antigua,1/aruba,1/barbados,1/blanc-sablon,1/boa_vista,1/caracas,1/curacao,1/dominica,1/grenada,1/guadeloupe,1/guyana,1/kralendijk,1/lower_princes,1/marigot,1/martinique,1/montserrat,1/port_of_spain,1/porto_velho,1/puerto_rico,1/santo_domingo,1/st_barthelemy,1/st_kitts,1/st_lucia,1/st_thomas,1/st_vincent,1/tortola,1/virgin","-3|s|02/16:24->11/03:00":"1/sao_paulo,5/east","-3|s":"1/argentina,1/buenos_aires,1/cordoba,1/fortaleza,1/montevideo,1/punta_arenas,12/rothera,3/stanley","-3|n|03/10:02->11/03:02":"1/glace_bay,1/goose_bay,1/halifax,1/moncton,1/thule,3/bermuda,6/atlantic","-3|n":"1/araguaina,1/bahia,1/belem,1/catamarca,1/cayenne,1/jujuy,1/maceio,1/mendoza,1/paramaribo,1/recife,1/rosario,1/santarem","-2|s":"5/denoronha","-2|n|03/30:22->10/26:23":"1/godthab","-2|n|03/10:02->11/03:02":"1/miquelon","-2|n":"1/noronha,3/south_georgia","-2.5|n|03/10:02->11/03:02":"1/st_johns,6/newfoundland","-1|n":"3/cape_verde","-11|n":"11/midway,11/niue,11/pago_pago,11/samoa","-10|n":"11/honolulu,11/johnston,11/rarotonga,11/tahiti"}}))&&t.default||t,s={};Object.keys(a).forEach(function(t){var n=t.split("|"),e={offset:Number(n[0]),hem:n[1]};n[2]&&(e.dst=n[2]),a[t].split(",").forEach(function(t){t=t.replace(/(^[0-9]+)\//,function(t,n){return n=Number(n),o[n]+"/"}),s[t]=e})}),s.utc={offset:0,hem:"n"};for(var u=-13;u<=13;u+=.5){var h=u;h>0&&(h="+"+h);var c="etc/gmt"+h;s[c]={offset:-1*u,hem:"n"},s[c="utc/gmt"+h]={offset:-1*u,hem:"n"}}var l=s,f=/(\-?[0-9]+)h(rs)?/i,d=/(\-?[0-9]+)/,y=/utc([\-+]?[0-9]+)/i,p=/gmt([\-+]?[0-9]+)/i,v=function(t){return(t=Number(t))>-13&&t<13?"etc/gmt"+(t=((t*=-1)>0?"+":"")+t):null},_=function(t){var n=t.match(f);if(null!==n)return v(n[1]);if(null!==(n=t.match(y)))return v(n[1]);if(null!==(n=t.match(p))){var e=-1*Number(n[1]);return v(e)}return null!==(n=t.match(d))?v(n[1]):null},m=function(){var t=function(){if("undefined"==typeof Intl||void 0===Intl.DateTimeFormat)return null;var t=Intl.DateTimeFormat();if(void 0===t||void 0===t.resolvedOptions)return null;var n=t.resolvedOptions().timeZone;return n?n.toLowerCase():null}();return null===t?"utc":t}(),g=Object.keys(l).reduce(function(t,n){var e=n.split("/")[1]||"";return t[e=e.replace(/_/g," ")]=n,t},{}),x=function(t,n){if(!t)return m;var e=t.trim(),i=t.split("/");if(i.length>2&&!1===n.hasOwnProperty(e)&&(e=i[0]+"/"+i[1]),e=e.toLowerCase(),!0===n.hasOwnProperty(e))return e;if(e=function(t){return t=(t=(t=(t=(t=(t=t.replace(/ time/g,"")).replace(/ (standard|daylight|summer)/g,"")).replace(/\b(east|west|north|south)ern/g,"$1")).replace(/\b(africa|america|australia)n/g,"$1")).replace(/\beuropean/g,"europe")).replace(/\islands/g,"island")}(e),!0===n.hasOwnProperty(e))return e;if(!0===g.hasOwnProperty(e))return g[e];if(!0===/[0-9]/.test(e)){var r=_(e);if(r)return r}throw new Error("Spacetime: Cannot find timezone named: '"+t+"'. Please enter an IANA timezone id.")},b={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5};b.date=b.day,b.month=25488e5,b.week=6048e5,b.year=3154e7,Object.keys(b).forEach(function(t){b[t+"s"]=b[t]});var k=b,w=function(t,n,e,i,r){var o=t.d[e]();if(o!==n){var a=null===r?null:t.d[r](),s=t.epoch,u=n-o;t.epoch+=k[i]*u,"day"===i&&Math.abs(u)>28&&n<28&&(t.epoch+=k.hour);for(var h=k[i]/2;t.d[e]()<n;)t.epoch+=h;for(;t.d[e]()>n;)t.epoch-=h;null!==r&&a!==t.d[r]()&&(t.epoch=s,t.epoch+=k[i]*u*.97)}},z={year:{valid:function(t){return t>-4e3&&t<4e3},walkTo:function(t,n){return w(t,n,"getFullYear","year",null)}},month:{valid:function(t){return t>=0&&t<=11},walkTo:function(t,n){var e=t.d,i=e.getMonth(),r=t.epoch,o=e.getYear();if(i!==n){var a=n-i;for(t.epoch+=k.day*(28*a),o!==t.d.getYear()&&(t.epoch=r);t.d.getMonth()<n;)t.epoch+=k.day;for(;t.d.getMonth()>n;)t.epoch-=k.day}}},date:{valid:function(t){return t>0&&t<=31},walkTo:function(t,n){return w(t,n,"getDate","day","getMonth")}},hour:{valid:function(t){return t>=0&&t<24},walkTo:function(t,n){return w(t,n,"getHours","hour","getDate")}},minute:{valid:function(t){return t>=0&&t<60},walkTo:function(t,n){return w(t,n,"getMinutes","minute","getHours")}},second:{valid:function(t){return t>=0&&t<60},walkTo:function(t,n){t.epoch=t.seconds(n).epoch}},millisecond:{valid:function(t){return t>=0&&t<1e3},walkTo:function(t,n){t.epoch=t.milliseconds(n).epoch}}},T=function(t,n){for(var e=Object.keys(z),i=t.clone(),r=0;r<e.length;r++){var o=e[r],a=n[o];if(void 0===a&&(a=i[o]()),"string"==typeof a&&(a=parseInt(a,10)),!z[o].valid(a))return t.epoch=null,void(!1===t.silent&&console.warn("invalid "+o+": "+a));z[o].walkTo(t,a)}},M=["jan","feb","mar","apr","may","jun","jul","aug","sept","oct","nov","dec"],O=["january","february","march","april","may","june","july","august","september","october","november","december"],j=function(){return M},S=function(){return O},E=function(){return function(){for(var t={sep:8},n=0;n<M.length;n++)t[M[n]]=n;for(var e=0;e<O.length;e++)t[O[e]]=e;return t}()},P=function(t){M=t.short||M,O=t.long||O},N=function(t,n){if(!n)return t;"Z"===n&&(n="+0000");var e=0;/^[\+-]?[0-9]{2}:[0-9]{2}$/.test(n)&&(!0===/:00/.test(n)&&(n=n.replace(/:00/,"")),!0===/:30/.test(n)&&(n=n.replace(/:30/,".5"))),/^[\+-]?[0-9]{4}$/.test(n)&&(n=n.replace(/30$/,".5")),e=parseFloat(n),Math.abs(e)>100&&(e/=100),(e*=-1)>=0&&(e="+"+e);var i="etc/gmt"+e;return t.timezones[i]&&(t.tz=i),t},D=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",e=(n=n.replace(/^\s+/,"").toLowerCase()).match(/([0-9]{1,2}):([0-9]{1,2}):?([0-9]{1,2})?[:\.]?([0-9]{1,4})?/);if(null!==e){var i=Number(e[1]);if(i<0||i>24)return t.startOf("day");var r=Number(e[2]);if(e[2].length<2||r<0||r>59)return t.startOf("day");t=(t=(t=(t=t.hour(i)).minute(r)).seconds(e[3]||0)).millisecond(e[4]||0);var o=n.match(/[\b0-9](am|pm)\b/);return null!==o&&o[1]&&(t=t.ampm(o[1])),t}if(null!==(e=n.match(/([0-9]+) ?(am|pm)/))&&e[1]){var a=Number(e[1]);return a>12||a<1?t.startOf("day"):t=(t=(t=t.hour(e[1]||0)).ampm(e[2])).startOf("hour")}return t=t.startOf("day")},A=[31,28,31,30,31,30,31,31,30,31,30,31],C=n.isLeapYear,q=function(t){if(!0!==A.hasOwnProperty(t.month))return!1;if(1===t.month)return!!(C(t.year)&&t.date<=29)||t.date<=28;var n=A[t.month]||0;return t.date<=n},I=E(),L=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=parseInt(t.trim(),10);return n=n||(new Date).getFullYear()},Y=[{reg:/^(\-?0?0?[0-9]{3,4})-([0-9]{1,2})-([0-9]{1,2})[T| ]([0-9.:]+)(Z|[0-9\-\+:]+)?$/,parse:function(t,n,e,i){var r=parseInt(n[2],10)-1,o={year:n[1],month:r,date:n[3]};return!1===q(o)?(t.epoch=null,t):(N(t,n[5]),T(t,o),t=D(t,n[4]))}},{reg:/^([0-9]{4})[\-\/]([0-9]{1,2})[\-\/]([0-9]{1,2})$/,parse:function(t,n){var e={year:n[1],month:parseInt(n[2],10)-1,date:parseInt(n[3],10)};return e.month>=12&&(e.date=parseInt(n[2],10),e.month=parseInt(n[3],10)-1),!1===q(e)?(t.epoch=null,t):(T(t,e),t=D(t))}},{reg:/^([0-9]{1,2})[\-\/]([0-9]{1,2})[\-\/]?([0-9]{4})?$/,parse:function(t,n){var e=parseInt(n[1],10)-1,i=parseInt(n[2],10);e>=12&&(e=parseInt(n[2],10)-1,i=parseInt(n[1],10));var r={year:n[3]||(new Date).getFullYear(),month:e,date:i};return!1===q(r)?(t.epoch=null,t):(T(t,r),t=D(t))}},{reg:/^([a-z]+) ([0-9]{1,2}(?:st|nd|rd|th)?),?( [0-9]{4})?( ([0-9:]+( ?am| ?pm)?))?$/i,parse:function(t,e){var i=I[e[1].toLowerCase()],r={year:L(e[3]),month:i,date:n.toCardinal(e[2]||"")};return!1===q(r)?(t.epoch=null,t):(T(t,r),t=D(t,e[4]))}},{reg:/^([a-z]+) ([0-9]{4})$/i,parse:function(t,n){var e=I[n[1].toLowerCase()],i={year:L(n[2]),month:e,date:1};return!1===q(i)?(t.epoch=null,t):(T(t,i),t=D(t,n[4]))}},{reg:/^([0-9]{1,2}(?:st|nd|rd|th)?) ([a-z]+),?( [0-9]{4})?$/i,parse:function(t,e){var i=I[e[2].toLowerCase()],r={year:L(e[3]),month:i,date:n.toCardinal(e[1])};return!1===q(r)?(t.epoch=null,t):(T(t,r),t=D(t))}},{reg:/^[0-9]{4}$/i,parse:function(t,n){var e=L(n[0]),i=new Date,r={year:e,month:i.getMonth(),date:i.getDate()};return!1===q(r)?(t.epoch=null,t):(T(t,r),t=D(t))}},{reg:/^[0-9,]+ ?b\.?c\.?$/i,parse:function(t,n){var e=n[0]||"";e=(e=e.replace(/^([0-9,]+) ?b\.?c\.?$/i,"-$1")).replace(/,/g,"");var i=parseInt(e.trim(),10),r=new Date,o={year:i,month:r.getMonth(),date:r.getDate()};return!1===q(o)?(t.epoch=null,t):(T(t,o),t=D(t))}}],F={now:function(t){return t.epoch=Date.now(),t},tonight:function(t){return t.epoch=Date.now(),t=t.hour(18)},today:function(t){return t.epoch=Date.now(),t},tomorrow:function(t){return t.epoch=Date.now(),t=(t=t.add(1,"day")).startOf("day")},yesterday:function(t){return t.epoch=Date.now(),t=(t=t.subtract(1,"day")).startOf("day")},christmas:function(t){var n=(new Date).getFullYear();return t=t.set([n,11,25,18,0,0])},"new years":function(t){var n=(new Date).getFullYear();return t=t.set([n,11,31,18,0,0])}};F["new years eve"]=F["new years"];var B=F,$={year:(new Date).getFullYear(),month:0,date:1},R=function(t,e,i){if("number"==typeof e)return e>0&&e<25e8&&!1===t.silent&&(console.warn("  - Warning: You are setting the date to January 1970."),console.warn("       -   did input seconds instead of milliseconds?")),t.epoch=e,t;if(t.epoch=Date.now(),null==e)return t;if(!0===n.isDate(e))return t.epoch=e.getTime(),t;if(!0===n.isArray(e))return t=function(t,n){for(var e=["year","month","date","hour","minute","second","millisecond"],i=0;i<e.length;i++){var r=n[i]||$[e[i]]||0;t=t[e[i]](r)}return t}(t,e);if(!0===n.isObject(e))return e.epoch?(t.epoch=e.epoch,t.tz=e.tz,t):t=function(t,n){n=Object.assign({},$,n);for(var e=Object.keys(n),i=0;i<e.length;i++){var r=e[i];if(void 0!==t[r]&&"function"==typeof t[r]&&null!==n[r]&&void 0!==n[r]&&""!==n[r]){var o=n[r]||$[r]||0;t=t[r](o)}}return t}(t,e);if("string"!=typeof e)return t;if(e=(e=(e=e.replace(/\b(mon|tues|wed|wednes|thu|thurs|fri|sat|satur|sun)(day)?\b/i,"")).replace(/,/g,"")).replace(/ +/g," ").trim(),!0===B.hasOwnProperty(e))return t=B[e](t);for(var r=0;r<Y.length;r++){var o=e.match(Y[r].reg);if(o)return t=Y[r].parse(t,o,i)}return!1===t.silent&&console.warn("Warning: couldn't parse date-string: '"+e+"'"),t.epoch=null,t},Q=["sun","mon","tue","wed","thu","fri","sat"],H=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],Z=function(){return Q},U=function(){return H},X=function(t){Q=t.short||Q,H=t.long||H},G=function(t){var e=t.timezone().current.offset,i=e<0,r="00";return.5===Math.abs(e%1)&&(r="30",e=e>=0?Math.floor(e):Math.ceil(e)),i?(e*=-1,e="-"+(e=n.zeroPad(e,2))):e="+"+(e=n.zeroPad(e,2)),"+00:00"==(e=e+":"+r)&&(e="Z"),e},V={day:function(t){return n.titleCase(t.dayName())},"day-short":function(t){return n.titleCase(Z()[t.day()])},"day-number":function(t){return t.day()},"day-ordinal":function(t){return n.ordinal(t.day())},"day-pad":function(t){return n.zeroPad(t.day())},date:function(t){return t.date()},"date-ordinal":function(t){return n.ordinal(t.date())},"date-pad":function(t){return n.zeroPad(t.date())},month:function(t){return n.titleCase(t.monthName())},"month-short":function(t){return n.titleCase(j()[t.month()])},"month-number":function(t){return t.month()},"month-ordinal":function(t){return n.ordinal(t.month())},"month-pad":function(t){return n.zeroPad(t.month())},"iso-month":function(t){return n.zeroPad(t.month()+1)},year:function(t){var n=t.year();return n>0?n:(n=Math.abs(n),n+" BC")},"year-short":function(t){var n=t.year();return n>0?"'".concat(String(t.year()).substr(2,4)):(n=Math.abs(n))+" BC"},"iso-year":function(t){var e=t.year(),i=e<0,r=n.zeroPad(Math.abs(e),4);return i&&(r="-"+(r=n.zeroPad(r,6))),r},time:function(t){return t.time()},"time-24":function(t){return"".concat(t.hour24(),":").concat(n.zeroPad(t.minute()))},hour:function(t){return t.hour12()},"hour-pad":function(t){return n.zeroPad(t.hour12())},"hour-24":function(t){return t.hour24()},"hour-24-pad":function(t){return n.zeroPad(t.hour24())},minute:function(t){return t.minute()},"minute-pad":function(t){return n.zeroPad(t.minute())},second:function(t){return t.second()},"second-pad":function(t){return n.zeroPad(t.second())},ampm:function(t){return t.ampm()},quarter:function(t){return"Q"+t.quarter()},season:function(t){return t.season()},era:function(t){return t.era()},timezone:function(t){return t.timezone().name},offset:function(t){return G(t)},numeric:function(t){return"".concat(t.year(),"/").concat(n.zeroPad(t.month()+1),"/").concat(n.zeroPad(t.date()))},"numeric-us":function(t){return"".concat(n.zeroPad(t.month()+1),"/").concat(n.zeroPad(t.date()),"/").concat(t.year())},"numeric-uk":function(t){return"".concat(n.zeroPad(t.date()),"/").concat(n.zeroPad(t.month()+1),"/").concat(t.year())},"mm/dd":function(t){return"".concat(n.zeroPad(t.month()+1),"/").concat(n.zeroPad(t.date()))},iso:function(t){var e=t.format("iso-year"),i=n.zeroPad(t.month()+1),r=n.zeroPad(t.date()),o=n.zeroPad(t.h24()),a=n.zeroPad(t.minute()),s=n.zeroPad(t.second()),u=n.zeroPad(t.millisecond(),3),h=G(t);return"".concat(e,"-").concat(i,"-").concat(r,"T").concat(o,":").concat(a,":").concat(s,".").concat(u).concat(h)},"iso-short":function(t){var e=n.zeroPad(t.month()+1),i=n.zeroPad(t.date());return"".concat(t.year(),"-").concat(e,"-").concat(i)},"iso-utc":function(t){return new Date(t.epoch).toISOString()},nice:function(t){return"".concat(j()[t.month()]," ").concat(n.ordinal(t.date()),", ").concat(t.time())},"nice-year":function(t){return"".concat(j()[t.month()]," ").concat(n.ordinal(t.date()),", ").concat(t.year())},"nice-day":function(t){return"".concat(Z()[t.day()]," ").concat(n.titleCase(j()[t.month()])," ").concat(n.ordinal(t.date()))},"nice-full":function(t){return"".concat(t.dayName()," ").concat(n.titleCase(t.monthName())," ").concat(n.ordinal(t.date()),", ").concat(t.time())}},W={"day-name":"day","month-name":"month","iso 8601":"iso","time-h24":"time-24","time-12":"time","time-h12":"time",tz:"timezone","day-num":"day-number","month-num":"month-number","month-iso":"iso-month","year-iso":"iso-year","nice-short":"nice",mdy:"numeric-us",dmy:"numeric-uk",ymd:"numeric","yyyy/mm/dd":"numeric","mm/dd/yyyy":"numeric-us","dd/mm/yyyy":"numeric-us","little-endian":"numeric-uk","big-endian":"numeric","day-nice":"nice-day"};Object.keys(W).forEach(function(t){return V[t]=V[W[t]]});var K=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!0!==t.isValid())return"";if(V.hasOwnProperty(e)){var i=String(V[e](t)||"");return"ampm"!==e&&(i=n.titleCase(i)),i}if(-1!==e.indexOf("{")){var r=/\{(.+?)\}/g;return e=e.replace(r,function(n,e){return e=e.toLowerCase().trim(),V.hasOwnProperty(e)?String(V[e](t)||""):""})}return t.format("iso-short")},J=n.zeroPad,tt=n.formatTimezone,nt={G:function(t){return t.era()},GG:function(t){return t.era()},GGG:function(t){return t.era()},GGGG:function(t){return"AD"===t.era()?"Anno Domini":"Before Christ"},y:function(t){return t.year()},yy:function(t){return parseInt(String(t.year()).substr(2,4),10)},yyy:function(t){return t.year()},yyyy:function(t){return t.year()},yyyyy:function(t){return"0"+t.year()},Q:function(t){return t.quarter()},QQ:function(t){return t.quarter()},QQQ:function(t){return t.quarter()},QQQQ:function(t){return t.quarter()},M:function(t){return t.month()+1},MM:function(t){return J(t.month()+1)},MMM:function(t){return t.format("month-short")},MMMM:function(t){return t.format("month")},w:function(t){return t.week()},ww:function(t){return J(t.week())},d:function(t){return t.date()},dd:function(t){return J(t.date())},D:function(t){return t.dayOfYear()},DD:function(t){return J(t.dayOfYear())},DDD:function(t){return J(t.dayOfYear(),3)},E:function(t){return t.format("day-short")},EE:function(t){return t.format("day-short")},EEE:function(t){return t.format("day-short")},EEEE:function(t){return t.format("day")},EEEEE:function(t){return t.format("day")[0]},e:function(t){return t.day()},ee:function(t){return t.day()},eee:function(t){return t.format("day-short")},eeee:function(t){return t.format("day")},eeeee:function(t){return t.format("day")[0]},a:function(t){return t.ampm().toUpperCase()},aa:function(t){return t.ampm().toUpperCase()},aaa:function(t){return t.ampm().toUpperCase()},aaaa:function(t){return t.ampm().toUpperCase()},h:function(t){return t.h12()},hh:function(t){return J(t.h12())},H:function(t){return t.hour()},HH:function(t){return J(t.hour())},m:function(t){return t.minute()},mm:function(t){return J(t.minute())},s:function(t){return t.second()},ss:function(t){return J(t.second())},A:function(t){return t.epoch-t.startOf("day").epoch},z:function(t){return t.timezone().name},zz:function(t){return t.timezone().name},zzz:function(t){return t.timezone().name},zzzz:function(t){return t.timezone().name},Z:function(t){return tt(t.timezone().current.offset)},ZZ:function(t){return tt(t.timezone().current.offset)},ZZZ:function(t){return tt(t.timezone().current.offset)},ZZZZ:function(t){return tt(t.timezone().current.offset,":")}},et=function(t,n,e){for(var i=t,r=n,o=0;o<e;o+=1)nt[i]=nt[r],i+=t,r+=n};et("q","Q",4),et("L","M",4),et("Y","y",4),et("c","e",4),et("k","H",2),et("K","h",2),et("S","s",2),et("v","z",4),et("V","Z",4);var it=function(t,n){for(var e=n.split(""),i=[e[0]],r=!1,o=1;o<e.length;o+=1){if("'"===e[o]){if(!0!=(r=!r)||!e[o+1]||"'"!==e[o+1])continue;r=!0}!0===r||e[o]===i[i.length-1][0]?i[i.length-1]+=e[o]:i.push(e[o])}return i.reduce(function(n,e){return void 0!==nt[e]?n+=nt[e](t)||"":n+=e,n},"")},rt=["year","season","quarter","month","week","day","quarterHour","hour","minute"],ot=function(t,n){var e=t.clone().startOf(n),i=t.clone().endOf(n).epoch-e.epoch,r=(t.epoch-e.epoch)/i;return parseFloat(r.toFixed(2))},at=function(t,e){if(e)return e=n.normalize(e),ot(t,e);var i={};return rt.forEach(function(n){i[n]=ot(t,n)}),i},st=function(t,e){var i=t.progress();return"quarterhour"===(e=n.normalize(e))&&(e="quarterHour"),void 0!==i[e]?(i[e]>.5&&(t=t.add(1,e)),t=t.startOf(e)):!1===t.silent&&console.warn("no known unit '"+e+"'"),t},ut=function(t,n,e){var i=0;for(t=t.clone();t.isBefore(n);)t=t.add(1,e),i+=1;return t.isAfter(n,e)&&(i-=1),i},ht=function(t,n,e){return t.isBefore(n)?ut(t,n,e):-1*ut(n,t,e)},ct=function(t,n){var e=n.epoch-t.epoch,i={milliseconds:e,seconds:parseInt(e/1e3,10)};i.minutes=parseInt(i.seconds/60,10),i.hours=parseInt(i.minutes/60,10);var r=t.clone();return i.years=function(t,n){var e=n.year()-t.year();return(t=t.year(n.year())).isAfter(n)&&(e-=1),e}(r,n),r=t.add(i.years,"year"),i.months=12*i.years,r=t.add(i.months,"month"),i.months+=ht(r,n,"month"),i.weeks=52*i.years,r=t.add(i.weeks,"week"),i.weeks+=ht(r,n,"week"),i.days=7*i.weeks,r=t.add(i.days,"day"),i.days+=ht(r,n,"day"),i},lt=function(t,e,i){e=n.beADate(e,t);var r=!1;if(t.isAfter(e)){var o=t;t=e,e=o,r=!0}var a=ct(t,e);return r&&(a=function(t){return Object.keys(t).forEach(function(n){t[n]*=-1}),t}(a)),i?(i=n.normalize(i),!0!==/s$/.test(i)&&(i+="s"),"dates"===i&&(i="days"),a[i]):a},ft={months:{almost:10,over:4},days:{almost:25,over:10},hours:{almost:20,over:8},minutes:{almost:50,over:20},seconds:{almost:50,over:20}};function dt(t,n){return 1===t&&(n=n.slice(0,-1)),t+" "+n}var yt=function(t,e){var i,r,o,a=function(t,n){var e=t.isBefore(n),i=e?n:t,r=e?t:n;r=r.clone();var o={years:0,months:0,days:0,hours:0,minutes:0,seconds:0};return Object.keys(o).forEach(function(t){if(!r.isSame(i,t)){var n=r.diff(i,t);r=r.add(n,t),o[t]=n}}),e&&Object.keys(o).forEach(function(t){0!==o[t]&&(o[t]*=-1)}),o}(t,e=n.beADate(e,t));if(!0===Object.keys(a).every(function(t){return!a[t]}))return{diff:a,rounded:"now",qualified:"now",precise:"now"};var s=[];return Object.keys(a).forEach(function(t,n,e){var o=Math.abs(a[t]);if(0!==o){var u=dt(o,t);if(s.push(u),!i){if(i=r=u,n>4)return;var h=e[n+1],c=Math.abs(a[h]);c>ft[h].almost?(i=dt(o+1,t),r="almost "+i):c>ft[h].over&&(r="over "+u)}}}),o=s.splice(0,2).join(", "),!0===t.isAfter(e)?(i+=" ago",r+=" ago",o+=" ago"):(i="in "+i,r="in "+r,o="in "+o),{diff:a,rounded:i,qualified:r,precise:o}},pt={north:[["spring",2,1],["summer",5,1],["fall",8,1],["autumn",8,1],["winter",11,1]],south:[["fall",2,1],["autumn",2,1],["winter",5,1],["spring",8,1],["summer",11,1]]},vt=[null,[0,1],[3,1],[6,1],[9,1]],_t={minute:function(t){return T(t,{second:0,millisecond:0}),t},quarterhour:function(t){var n=t.minutes();return t=n>=45?t.minutes(45):n>=30?t.minutes(30):n>=15?t.minutes(15):t.minutes(0),T(t,{second:0,millisecond:0}),t},hour:function(t){return T(t,{minute:0,second:0,millisecond:0}),t},day:function(t){return T(t,{hour:0,minute:0,second:0,millisecond:0}),t},week:function(t){var n=t.clone();return(t=t.day(t._weekStart)).isAfter(n)&&(t=t.subtract(1,"week")),T(t,{hour:0,minute:0,second:0,millisecond:0}),t},month:function(t){return T(t,{date:1,hour:0,minute:0,second:0,millisecond:0}),t},quarter:function(t){var n=t.quarter();return vt[n]&&T(t,{month:vt[n][0],date:vt[n][1],hour:0,minute:0,second:0,millisecond:0}),t},season:function(t){var n=t.season(),e="north";"South"===t.hemisphere()&&(e="south");for(var i=0;i<pt[e].length;i++)if(pt[e][i][0]===n){var r=t.year();return"winter"===n&&t.month()<3&&(r-=1),T(t,{year:r,month:pt[e][i][1],date:pt[e][i][2],hour:0,minute:0,second:0,millisecond:0}),t}return t},year:function(t){return T(t,{month:0,date:1,hour:0,minute:0,second:0,millisecond:0}),t},decade:function(t){var n=(t=t.startOf("year")).year(),e=10*parseInt(n/10,10);return t=t.year(e)},century:function(t){var n=(t=t.startOf("year")).year(),e=100*parseInt(n/100,10);return t=t.year(e)}};_t.date=_t.day;var mt=function(t,e){var i=t.clone();return e=n.normalize(e),_t[e]?_t[e](i):"summer"===e||"winter"===e?(i=i.season(e),_t.season(i)):i},gt=function(t,e){var i=t.clone();return e=n.normalize(e),_t[e]?i=(i=(i=_t[e](i)).add(1,e)).subtract(1,"milliseconds"):i},xt=function(t){return!!Z().find(function(n){return n===t})||!!U().find(function(n){return n===t})},bt=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2?arguments[2]:void 0;if(!e||!i)return[];if(e=n.normalize(e),i=t.clone().set(i),t.isAfter(i)){var r=t;t=i,i=r}var o=t.clone();xt(e)?(o=o.next(e),e="week"):o=o.next(e);for(var a=[];o.isBefore(i);)a.push(o),o=o.add(1,e);return a},kt=function(t){var n=t.timezones,e=t.tz;if(!1===n.hasOwnProperty(e)&&(e=x(t.tz,n)),null===e)return!1===t.silent&&console.warn("Warn: could not find given or local timezone - '"+t.tz+"'"),{current:{epochShift:0}};var r,o,a=n[e],s={name:(r=e,r=(r=(r=r[0].toUpperCase()+r.substr(1)).replace(/\/gmt/,"/GMT")).replace(/[\/_]([a-z])/gi,function(t){return t.toUpperCase()})),hasDst:Boolean(a.dst),default_offset:a.offset,hemisphere:"s"===a.hem?"South":"North",current:{}};if(s.hasDst){var u=(o=a.dst)?o.split("->"):[];s.change={start:u[0],back:u[1]}}var h=a.offset,c=h;return!0===s.hasDst&&(c="North"===s.hemisphere?h-1:a.offset+1),!1===s.hasDst?(s.current.offset=h,s.current.isDST=!1):!0===i(t.epoch,s.change.start,s.change.back,h)?(s.current.offset=h,s.current.isDST="North"===s.hemisphere):(s.current.offset=c,s.current.isDST="South"===s.hemisphere),s},wt={set:function(t,n){var e=this.clone();return e=R(e,t),n&&(this.tz=x(n)),e},timezone:function(){return kt(this)},isDST:function(){return kt(this).current.isDST},hasDST:function(){return kt(this).hasDst},offset:function(){return 60*kt(this).current.offset},hemisphere:function(){return kt(this).hemisphere},format:function(t){return K(this,t)},unixFmt:function(t){return it(this,t)},startOf:function(t){return mt(this,t)},endOf:function(t){return gt(this,t)},leapYear:function(){var t=this.year();return n.isLeapYear(t)},progress:function(t){return at(this,t)},nearest:function(t){return st(this,t)},diff:function(t,n){return lt(this,t,n)},since:function(t){return t||(t=this.clone().set()),yt(this,t)},next:function(t){return this.add(1,t).startOf(t)},last:function(t){return this.subtract(1,t).startOf(t)},isValid:function(){return!(!this.epoch&&0!==this.epoch||isNaN(this.d.getTime()))},goto:function(t){var n=this.clone();return n.tz=x(t,n.timezones),n},every:function(t,n){return bt(this,t,n)},isAwake:function(){var t=this.hour();return!(t<8||t>22)},isAsleep:function(){return!this.isAwake()},log:function(){return console.log(""),console.log(K(this,"nice-short")),this},logYear:function(){return console.log(""),console.log(K(this,"full-short")),this},debug:function(){var t=this.timezone(),n=this.format("MM")+" "+this.format("date-ordinal")+" "+this.year();return n+="\n     - "+this.format("time"),console.log("\n\n",n+"\n     - "+t.name+" ("+t.current.offset+")"),this},from:function(t){return(t=this.clone().set(t)).since(this)},fromNow:function(){return this.clone().set(Date.now()).since(this)},weekStart:function(t){if("number"==typeof t)return this._weekStart=t,this;if("string"==typeof t){t=t.toLowerCase().trim();var n=Z().indexOf(t);-1===n&&(n=U().indexOf(t)),-1===n&&(n=1),this._weekStart=n}else console.warn("Spacetime Error: Cannot understand .weekStart() input:",t);return this}};wt.inDST=wt.isDST,wt.round=wt.nearest,wt.each=wt.every;var zt=wt,Tt=function(t){return"string"==typeof t&&(t=parseInt(t,10)),t},Mt=["year","month","date","hour","minute","second","millisecond"],Ot=function(t,n,e){for(var i=Mt.indexOf(e),r=Mt.slice(i,Mt.length),o=0;o<r.length;o++){var a=n[r[o]]();t[r[o]](a)}return t},jt=function(t,n){n=Tt(n);var e=t.millisecond()-n;return t.epoch-e},St=function(t,n){n=Tt(n);var e=(t.second()-n)*k.second;return t.epoch-e},Et=function(t,n){n=Tt(n);var e=t.clone(),i=(t.minute()-n)*k.minute;return t.epoch-=i,Ot(t,e,"second"),t.epoch},Pt=function(t,n){(n=Tt(n))>=24?n=24:n<0&&(n=0);var e=t.clone(),i=(t.hour()-n)*k.hour;return t.epoch-=i,T(t,{hour:n}),Ot(t,e,"minute"),t.epoch},Nt=function(t,n){var e=n.match(/([0-9]{1,2}):([0-9]{1,2})(am|pm)?/);if(!e){if(!(e=n.match(/([0-9]{1,2})(am|pm)/)))return t.epoch;e.splice(2,0,"0")}var i=!1,r=parseInt(e[1],10),o=parseInt(e[2],10);return r>12&&(i=!0),!1===i&&("am"===e[3]&&12===r&&(r=0),"pm"===e[3]&&r<12&&(r+=12)),(t=(t=(t=(t=t.hour(r)).minute(o)).second(0)).millisecond(0)).epoch},Dt=function(t,n){if((n=Tt(n))>28){var e=A[t.month()];n>e&&(n=e)}return n<=0&&(n=1),T(t,{date:n}),t.epoch},At=function(t,n){"string"==typeof n&&(n=E()[n.toLowerCase()]),(n=Tt(n))>=12&&(n=11),n<=0&&(n=0);var e=t.date();return e>A[n]&&(e=A[n]),T(t,{month:n,date:e}),t.epoch},Ct=function(t,n){return n=Tt(n),T(t,{year:n}),t.epoch},qt=function(t,n){n=Tt(n);var e=t.clone();return(n-=1)<=0?n=0:n>=365&&(n=364),t=(t=t.startOf("year")).add(n,"day"),Ot(t,e,"hour"),t.epoch},It={millisecond:function(t){if(void 0!==t){var n=this.clone();return n.epoch=jt(n,t),n}return this.d.getMilliseconds()},second:function(t){if(void 0!==t){var n=this.clone();return n.epoch=St(n,t),n}return this.d.getSeconds()},minute:function(t){if(void 0!==t){var n=this.clone();return n.epoch=Et(n,t),n}return this.d.getMinutes()},hour:function(t){var n=this.d;if(void 0!==t){var e=this.clone();return e.epoch=Pt(e,t),e}return n.getHours()},hourFloat:function(t){if(void 0!==t){var n=this.clone(),e=t%1;e*=60;var i=parseInt(t,10);return n.epoch=Pt(n,i),n.epoch=Et(n,e),n}var r=this.d,o=r.getHours(),a=r.getMinutes();return o+(a/=60)},hour12:function(t){var n=this.d;if(void 0!==t){var e=this.clone(),i=(t=""+t).match(/^([0-9]+)(am|pm)$/);if(i){var r=parseInt(i[1],10);"pm"===i[2]&&(r+=12),e.epoch=Pt(e,r)}return e}var o=n.getHours();return o>12&&(o-=12),0===o&&(o=12),o},time:function(t){if(void 0!==t){var e=this.clone();return e.epoch=Nt(e,t),e}return"".concat(this.h12(),":").concat(n.zeroPad(this.minute())).concat(this.ampm())},ampm:function(t){var n="am",e=this.hour();if(e>=12&&(n="pm"),"string"!=typeof t)return n;var i=this.clone();return t=t.toLowerCase().trim(),e>=12&&"am"===t?(e-=12,i.hour(e)):e<12&&"pm"===t?(e+=12,i.hour(e)):i},dayTime:function(t){if(void 0!==t){var n={morning:"7:00am",breakfast:"7:00am",noon:"12:00am",lunch:"12:00pm",afternoon:"2:00pm",evening:"6:00pm",dinner:"6:00pm",night:"11:00pm",midnight:"23:59pm"},e=this.clone();return t=(t=t||"").toLowerCase(),!0===n.hasOwnProperty(t)&&(e=e.time(n[t])),e}var i=this.hour();return i<6?"night":i<12?"morning":i<17?"afternoon":i<22?"evening":"night"},iso:function(t){return void 0!==t?this.set(t):this.format("iso")}},Lt={date:function(t){if(void 0!==t){var n=this.clone();return n.epoch=Dt(n,t),n}return this.d.getDate()},day:function(t){if(void 0===t)return this.d.getDay();var n=this.clone(),e=t;"string"==typeof t&&(t=t.toLowerCase(),-1===(e=Z().indexOf(t))&&(e=U().indexOf(t)));var i=this.d.getDay(),r=i-e,o=this.subtract(24*r,"hours");return T(o,{hour:n.hour(),minute:n.minute(),second:n.second()}),o},dayName:function(t){if(void 0===t)return U()[this.day()];var n=this.clone();return n=n.day(t)},month:function(t){if(void 0!==t){var n=this.clone();return n.epoch=At(n,t),n}return this.d.getMonth()}},Yt=function(t){return t=(t=(t=t.minute(0)).second(0)).millisecond(1)},Ft={dayOfYear:function(t){if(void 0!==t){var n=this.clone();return n.epoch=qt(n,t),n}for(var e,i=0,r=this.d.getMonth(),o=1;o<=r;o++)(e=new Date).setDate(1),e.setYear(this.d.getFullYear()),e.setHours(1),e.setMinutes(1),e.setMonth(o),e.setHours(-2),i+=e.getDate();return i+this.d.getDate()},week:function(t){if(void 0!==t){var n=this.clone();return n=(n=(n=n.month(0)).date(1)).day("monday"),"december"===(n=Yt(n)).monthName()&&(n=n.add(1,"week")),t-=1,n=n.add(t,"weeks")}var e=this.clone();e=(e=e.month(0)).date(1),"december"===(e=(e=Yt(e)).day("monday")).monthName()&&(e=e.add(1,"week"));var i=this.epoch;if(e.epoch>i)return 1;var r=0,o=4*this.month();for(e.epoch+=k.week*o,r+=o;r<52;r++){if(e.epoch>i)return r;e=e.add(1,"week")}return 52},monthName:function(t){if(void 0===t)return S()[this.month()];var n=this.clone();return n=n.month(t)},quarter:function(t){if(void 0!==t&&("string"==typeof t&&(t=t.replace(/^q/i,""),t=parseInt(t,10)),vt[t])){var n=this.clone(),e=vt[t][0];return n=(n=(n=n.month(e)).date(1)).startOf("day")}for(var i=this.d.getMonth(),r=1;r<vt.length;r++)if(i<vt[r][0])return r-1;return 4},season:function(t){var n="north";if("South"===this.hemisphere()&&(n="south"),void 0!==t){for(var e=this.clone(),i=0;i<pt[n].length;i++)t===pt[n][i][0]&&(e=(e=(e=e.month(pt[n][i][1])).date(1)).startOf("day"));return e}for(var r=this.d.getMonth(),o=0;o<pt[n].length-1;o++)if(r>=pt[n][o][1]&&r<pt[n][o+1][1])return pt[n][o][0];return"winter"},year:function(t){if(void 0!==t){var n=this.clone();return n.epoch=Ct(n,t),n}return this.d.getFullYear()},era:function(t){if(void 0!==t){var n=this.clone();t=t.toLowerCase();var e=n.d.getFullYear();return"bc"===t&&e>0&&(n.epoch=Ct(n,-1*e)),"ad"===t&&e<0&&(n.epoch=Ct(n,-1*e)),n}return this.d.getFullYear()<0?"BC":"AD"}},Bt=Object.assign({},It,Lt,Ft);Bt.milliseconds=Bt.millisecond,Bt.seconds=Bt.second,Bt.minutes=Bt.minute,Bt.hours=Bt.hour,Bt.hour24=Bt.hour,Bt.h12=Bt.hour12,Bt.h24=Bt.hour24,Bt.days=Bt.day;var $t=function(t){Object.keys(Bt).forEach(function(n){t.prototype[n]=Bt[n]})},Rt=["millisecond","second","minute","hour","date","month"],Qt={second:Rt.slice(0,1),minute:Rt.slice(0,2),quarterhour:Rt.slice(0,2),hour:Rt.slice(0,3),date:Rt.slice(0,4),month:Rt.slice(0,4),quarter:Rt.slice(0,4),season:Rt.slice(0,4),year:Rt,decade:Rt,century:Rt};Qt.week=Qt.hour,Qt.season=Qt.date,Qt.quarter=Qt.date;var Ht={year:!0,quarter:!0,season:!0,month:!0,week:!0,day:!0},Zt={month:!0,quarter:!0,season:!0,year:!0},Ut=function(t){t.prototype.add=function(t,e){var i=this.clone();if(!e||0===t)return i;var r=this.clone();e=n.normalize(e),k[e]?i.epoch+=k[e]*t:"week"===e?i.epoch+=k.day*(7*t):"quarter"===e||"season"===e?i.epoch+=k.month*(4*t):"season"===e?i.epoch+=k.month*(4*t):"quarterhour"===e&&(i.epoch+=15*k.minute*t);var o={};if(Qt[e]&&Qt[e].forEach(function(t){o[t]=r[t]()}),Ht[e]){var a=r.timezone().current.offset-i.timezone().current.offset;i.epoch+=3600*a*1e3}if("month"===e&&(o.month=r.month()+t,o=function(t,n){if(t.month>0){var e=parseInt(t.month/12,10);t.year=n.year()+e,t.month=t.month%12}else if(t.month<0){var i=Math.floor(Math.abs(t.month)/13,10);i=Math.abs(i)+1,t.year=n.year()-i,t.month=t.month%12,t.month=t.month+12,12===t.month&&(t.month=0)}return t}(o,r)),"week"===e){var s=r.date()+7*t;s<=28&&s>1&&(o.date=s)}else if("date"===e){var u=r.date()+t;u<=28&&u>1?o.date=u:0!==t&&r.isSame(i,"day")&&(o.date=r.date()+t)}else"year"===e&&i.year()===r.year()?i.epoch+=k.week:"decade"===e?o.year=i.year()+10:"century"===e&&(o.year=i.year()+100);if(Zt[e]){var h=A[o.month];o.date=r.date(),o.date>h&&(o.date=h)}return T(i,o),i},t.prototype.subtract=function(t,n){return this.clone().add(-1*t,n)},t.prototype.minus=t.prototype.subtract,t.prototype.plus=t.prototype.add},Xt={millisecond:function(t){return t.epoch},second:function(t){return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second()].join("-")},minute:function(t){return[t.year(),t.month(),t.date(),t.hour(),t.minute()].join("-")},hour:function(t){return[t.year(),t.month(),t.date(),t.hour()].join("-")},day:function(t){return[t.year(),t.month(),t.date()].join("-")},week:function(t){return[t.year(),t.week()].join("-")},month:function(t){return[t.year(),t.month()].join("-")},quarter:function(t){return[t.year(),t.quarter()].join("-")},year:function(t){return t.year()}};Xt.date=Xt.day;var Gt=function(t){t.prototype.isSame=function(n,e){return e?("string"!=typeof n&&"number"!=typeof n||(n=new t(n,this.timezone.name)),e=e.replace(/s$/,""),Xt[e]?Xt[e](this)===Xt[e](n):null):null}},Vt=function(t){var e={isAfter:function(t){t=n.beADate(t,this);var e=n.getEpoch(t);return null===e?null:this.epoch>e},isBefore:function(t){t=n.beADate(t,this);var e=n.getEpoch(t);return null===e?null:this.epoch<e},isEqual:function(t){t=n.beADate(t,this);var e=n.getEpoch(t);return null===e?null:this.epoch===e},isBetween:function(t,e){t=n.beADate(t,this),e=n.beADate(e,this);var i=n.getEpoch(t);if(null===i)return null;var r=n.getEpoch(e);return null===r?null:i<this.epoch&&this.epoch<r}};Object.keys(e).forEach(function(n){t.prototype[n]=e[n]})},Wt=function(t){var e={i18n:function(t){n.isObject(t.days)&&X(t.days),n.isObject(t.months)&&P(t.months)}};Object.keys(e).forEach(function(n){t.prototype[n]=e[n]})},Kt=l,Jt=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.epoch=null,this.tz=x(n,Kt),this.silent=e.silent||!0,this._weekStart=1,void 0!==e.weekStart&&(this._weekStart=e.weekStart),Object.defineProperty(this,"d",{get:function(){var t=r(this),n=(new Date(this.epoch).getTimezoneOffset()||0)+60*t;n=60*n*1e3;var e=this.epoch+n;return new Date(e)}}),Object.defineProperty(this,"timezones",{get:function(){return Kt},set:function(t){return Kt=t,t}}),void 0!==t||null===t){var i=R(this,t,n);this.epoch=i.epoch}};Object.keys(zt).forEach(function(t){Jt.prototype[t]=zt[t]}),Jt.prototype.clone=function(){return new Jt(this.epoch,this.tz,{silent:this.silent,weekStart:this._weekStart})},$t(Jt),Ut(Jt),Gt(Jt),Vt(Jt),Wt(Jt);var tn=Jt,nn=function(t,n){var e=new tn(null),i=new tn(null);e=e.time(t),i=n?i.time(n):e.add(59,"minutes");var r=e.hour(),o=i.hour();return Object.keys(e.timezones).filter(function(t){if(-1===t.indexOf("/"))return!1;var n=new tn(null,t),a=n.hour();return a>=r&&a<=o&&!(a===r&&n.minute()<e.minute())&&!(a===o&&n.minute()>i.minute())})},en=function(t,n,e){return new tn(t,n,e)};return en.now=function(t,n){return new tn((new Date).getTime(),t,n)},en.today=function(t,n){return new tn((new Date).getTime(),t,n).startOf("day")},en.tomorrow=function(t,n){return new tn((new Date).getTime(),t,n).add(1,"day").startOf("day")},en.yesterday=function(t,n){return new tn((new Date).getTime(),t,n).subtract(1,"day").startOf("day")},en.extend=function(t){return Object.keys(t).forEach(function(n){tn.prototype[n]=t[n]}),this},en.whereIts=nn,en.version="6.0.0",en.plugin=en.extend,en}()}),_=function(t){if("number"==typeof t)return{type:"number",value:t};if(/[0-9]px$/.test(t))return{type:"pixel",value:Number(t.replace(/px/,""))};if(/[0-9]%$/.test(t))return{type:"percent",value:Number(t.replace(/%/,""))};var n=Number(t);if(!isNaN(n))return{type:"number",value:n};var e=v(t);return e.isValid()?{type:"date",value:e.epoch}:(console.warn("Counldn't parse: "+t),{type:"unknown",value:null})},m=function(t,n){var e=_(t);return"date"===e.type&&n.x.format(e.type),e},g=function(t,n){var e=_(t);return"date"===e.type&&n.y.format(e.type),e},x={extent:function(t){var n=null,e=null;return t.forEach(function(t){(null===n||t<n)&&(n=t),(null===e||t>e)&&(e=t)}),{min:n,max:e}},uid:function(t){for(var n="",e=0;e<5;e++)n+=parseInt(9*Math.random(),10);return t+"-"+n}},b=m,k=g,w=function(t){return null!=t},z={from:function(t,n){return!0===w(t)&&(t=b(t,this),this.x.min=t,this.x.rescale()),!0===w(n)&&(n=k(n,this).value,this.y.min=n,this.y.rescale()),this},to:function(t,n){return!0===w(t)&&(t=b(t,this).value,this.c.max=t,this.c.rescale()),!0===w(n)&&(n=b(n,this).value,this.y.max=n,this.y.rescale()),this},fitX:function(t){var n=this.shapes.map(function(t){return t.extent()}).filter(function(t){return null!==t}),e=x.extent(n.map(function(t){return t.x.min}).filter(function(t){return null!==t})).min||0,i=x.extent(n.map(function(t){return t.x.max}).filter(function(t){return null!==t})).max||0;return this.x.min=e>0?0:e,this.x.max=i,"date"===this.x.format()&&(this.x.min=e,this.x.max=i),this.x.rescale(),!0===w(t)&&((t=b(t,this).value)>this.x.max?this.x.max=t:t<this.x.min&&(this.x.min=t),this.x.rescale()),this},fitY:function(t){var n=this.shapes.map(function(t){return t.extent()}).filter(function(t){return null!==t}),e=x.extent(n.map(function(t){return t.y.min}).filter(function(t){return null!==t})).min||0,i=x.extent(n.map(function(t){return t.y.max}).filter(function(t){return null!==t})).max||0;return this.y.min=e>0?0:e,this.y.max=i,"date"===this.y.format()&&(this.y.min=e,this.y.max=i),this.y.rescale(),!0===w(t)&&((t=k(t,this).value)>this.y.max?this.y.max=t:t<this.y.min&&(this.y.min=t),this.y.rescale()),this},fit:function(t,n){return this.fitX(t),this.fitY(n),this}},T=function(t,n,e){return t=t.filter(function(t){if(!0===t.ignore_clip)return!0;var i=t.extent(),r=i.x,o=i.y;if(n._clip){var a=n.min,s=n.max;if(a>s){var u=a;a=s,s=u}if(r.min<a)return!1;if(r.max>s)return!1;if(r.min>s||r.max<a)return!1}if(e._clip){var h=e.min,c=e.max;if(h>c){var l=h;h=c,c=l}if(o.min<h)return!1;if(o.max>c)return!1;if(o.min>c||o.max<h)return!1}return!0})},M=function(t){var n=t.world||[],e=t.minmax||[];return function(t){var i=e[1]-e[0],r=(t-e[0])/i,o=n[1]-n[0];return parseInt(o*r,10)}},O=m,j=function(t){return null!=t},S=function(){function t(e,i){n(this,t),this.world=i,this.min=0,this.max=1,this.from=0,this.to=i.width,this._format="number",this.parse=O,this.is_y=!1,this._clip=!1,this.rescale()}return i(t,[{key:"rescale",value:function(){return this.scale=M({world:[this.from,this.to],minmax:[this.min,this.max]}),this}},{key:"fit",value:function(t,n){if(!1===j(t)&&!1===j(n))return this.is_y?this.world.fitY():this.world.fitX(),this.rescale(),this;if(!0===j(t)){var e=this.parse(t,this.world).value;this.min=e}if(!0===j(n)){var i=this.parse(n,this.world).value;this.max=i}return this.rescale(),this}},{key:"place",value:function(t){if("pixel"===t.type)return this.is_y?this.to-t.value:t.value;if("percent"===t.type){var n=this.byPercent(t.value);return this.scale(n)}return this.scale(t.value)}},{key:"byPercent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t/=100;var n=this.max-this.min;return n*t+this.min}},{key:"format",value:function(t){return void 0===t?this._format:(this._format=t,this)}},{key:"clip",value:function(t){void 0===t&&(t=!0),this._clip=t}},{key:"reverse",value:function(){var t=this.min;return this.min=this.max,this.max=t,this.rescale(),t}}]),t}(),E=g,P=function(t){function e(t,i){var r;return n(this,e),(r=s(this,o(e).call(this,t,i))).to=i.height,r.is_y=!0,r.parse=E,r.rescale(),r}return r(e,S),i(e,[{key:"rescale",value:function(){this.scale=M({world:[this.from,this.to],minmax:[this.max,this.min]})}}]),e}(),N=f(function(t,n){t.exports=function t(n,e,i){function r(a,s){if(!e[a]){if(!n[a]){if(!s&&c)return c();if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[a]={exports:{}};n[a][0].call(h.exports,function(t){return r(n[a][1][t]||t)},h,h.exports,t,n,e,i)}return e[a].exports}for(var o=c,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,n,e){n.exports={blue:"#6699cc",green:"#6accb2",yellow:"#e1e6b3",red:"#cc7066",pink:"#F2C0BB",brown:"#705E5C",orange:"#cc8a66",purple:"#d8b3e6",navy:"#335799",olive:"#7f9c6c",fuscia:"#735873",beige:"#e6d7b3",slate:"#8C8C88",suede:"#9c896c",burnt:"#603a39",sea:"#50617A",sky:"#2D85A8",night:"#303b50",rouge:"#914045",grey:"#838B91",mud:"#C4ABAB",royal:"#275291",cherry:"#cc6966",tulip:"#e6b3bc",rose:"#D68881",fire:"#AB5850",greyblue:"#72697D",greygreen:"#8BA3A2",greypurple:"#978BA3",burn:"#6D5685",slategrey:"#bfb0b3",light:"#a3a5a5",lighter:"#d7d5d2",fudge:"#4d4d4d",lightgrey:"#949a9e",white:"#fbfbfb",dimgrey:"#606c74",softblack:"#463D4F",dark:"#443d3d",black:"#333333"}},{}],2:[function(t,n,e){var i=t("./colors"),r={juno:["blue","mud","navy","slate","pink","burn"],barrow:["rouge","red","orange","burnt","brown","greygreen"],roma:["#8a849a","#b5b0bf","rose","lighter","greygreen","mud"],palmer:["red","navy","olive","pink","suede","sky"],mark:["#848f9a","#9aa4ac","slate","#b0b8bf","mud","grey"],salmon:["sky","sea","fuscia","slate","mud","fudge"],dupont:["green","brown","orange","red","olive","blue"],bloor:["night","navy","beige","rouge","mud","grey"],yukon:["mud","slate","brown","sky","beige","red"],david:["blue","green","yellow","red","pink","light"],neste:["mud","cherry","royal","rouge","greygreen","greypurple"],ken:["red","sky","#c67a53","greygreen","#dfb59f","mud"]};Object.keys(r).forEach(function(t){r[t]=r[t].map(function(t){return i[t]||t})}),n.exports=r},{"./colors":1}],3:[function(t,n,e){var i=t("./colors"),r=t("./combos"),o={colors:i,list:Object.keys(i).map(function(t){return i[t]}),combos:r};n.exports=o},{"./colors":1,"./combos":2}]},{},[3])(3)}),D=function(t,n){if(t.length<=n||t.length<=5)return t;for(;t.length>n;)if((t=t.filter(function(t,n){return n%2==0})).length<=n||t.length<=5)return t;return t},A=function(t,n,e){var i=[];for(t=(t=t.add(1,e)).startOf(e);t.isBefore(n);)i.push(t),t=t.add(1,e);return i},C=function(t,n,e,i){var r=i.epoch-e.epoch;return t.map(function(t){var i=(t.epoch-e.epoch)/r;return{label:t.format(n),epoch:t.epoch,value:parseInt(1e3*i,10)/1e3}})},q={centuries:function(t,n,e){var i=A(t,n,"century");i=D(i,e);var r="{year}";return t.diff(n,"year")>6&&(r="{year}"),i=C(i,r,t,n)},decades:function(t,n,e){var i=A(t,n,"decade");i=D(i,e);var r="{year}";return t.diff(n,"year")>6&&(r="{year}"),i=C(i,r,t,n)},years:function(t,n,e){var i=A(t,n,"year");i=D(i,e);var r="{month-short} {year-short}";return t.diff(n,"year")>6&&(r="{year}"),i=C(i,r,t,n)},months:function(t,n,e){var i=A(t,n,"month");i=D(i,e);var r="{month-short} {date}";return!1===t.isSame(n,"year")&&(r="{month-short} {year}"),i=C(i,r,t,n)},days:function(t,n,e){var i=A(t,n,"day");i=D(i,e);return i=C(i,"{month-short} {date}",t,n)},hours:function(t,n,e){var i=A(t,n,"hour");i=D(i,e);var r="{time}";return!1===t.isSame(n,"day")&&(r="{day-short} {hour}{ampm}"),i=C(i,r,t,n)},minutes:function(t,n,e){var i=A(t,n,"minute");i=D(i,e);return i=C(i,"{time}",t,n)}},I=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=t.diff(n);return i.years>300?q.centuries(t,n,e):i.years>30?q.decades(t,n,e):i.years>3?q.years(t,n,e):i.months>3?q.months(t,n,e):i.days>3?q.days(t,n,e):i.hours>3?q.hours(t,n,e):i.minutes>3?q.minutes(t,n,e):q.months(t,n,e)},L=function(t){return(t=t.map(function(t){return t.value=1-t.value,t})).reverse()},Y=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,i=!1;if(t=v(t),n=v(n),t.epoch>n.epoch){i=!0;var r=t.epoch;t.epoch=n.epoch,n.epoch=r}var o=I(t,n,e);return!0===i&&(o=L(o)),o};Y.version="0.2.0";var F=Y,B=f(function(t,n){t.exports=function t(n,e,i){function r(a,s){if(!e[a]){if(!n[a]){if(!s&&c)return c();if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[a]={exports:{}};n[a][0].call(h.exports,function(t){return r(n[a][1][t]||t)},h,h.exports,t,n,e,i)}return e[a].exports}for(var o=c,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,n,e){n.exports={trillion:1e12,billion:1e9,million:1e6,hundredThousand:1e5,tenThousand:1e4,thousand:1e3,hundred:100,ten:10,one:1,tenth:.1,hundredth:.01,thousandth:.01}},{}],2:[function(t,n,e){var i=t("./_constants");n.exports=function(t){return(t=parseFloat(t))>=i.trillion?(t=1e11*parseInt(t/1e11,10))/i.trillion+"t":t>=i.billion?(t=1e8*parseInt(t/1e8,10))/i.billion+"b":t>=i.million?(t=1e5*parseInt(t/1e5,10))/i.million+"m":t>=i.tenThousand?(t=parseInt(t/i.thousand,10)*i.thousand)/i.thousand+"k":t>=i.thousand?(t=parseInt(t/i.hundred,10)*i.hundred)/i.thousand+"k":t.toLocaleString()}},{"./_constants":1}],3:[function(t,n,e){n.exports=function(t,n){if(t.length<=n||t.length<=5)return t;for(;t.length>n;)if((t=t.filter(function(t,n){return n%2==0})).length<=n||t.length<=5)return t;return t}},{}],4:[function(t,n,e){var i=t("./methods");n.exports=function(t,n,e){var r=!1;if((t=Number(t))>(n=Number(n))){r=!0;var o=t;t=n,n=o}var a=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,r=Math.abs(n-t);return 0===r?[]:r>3e6?i.millions(t,n,e):r>3e5?i.hundredKs(t,n,e):r>3e3?i.thousands(t,n,e):r>300?i.hundreds(t,n,e):r>30?i.tens(t,n,e):r>3?i.ones(t,n,e):r>.3?i.tenths(t,n,e):i.hundredths(t,n,e)}(t,n,e);return!0===r&&(a=function(t){return(t=t.map(function(t){return t.value=1-t.value,t})).reverse()}(a)),a}},{"./methods":5}],5:[function(t,n,e){var i=t("./_reduce"),r=t("./_prettyNum"),o=t("./_constants"),a=function(t,n,e){var i=e/2,r=[];for(t=function(t,n){return Math.floor(t/n)*n}(t=t+=e,e);t<n;)r.push(t),t=t+=i;return r},s=function(t,n,e,i){var o=i-e;return t.map(function(t){var n=(t-e)/o;return{label:r(t),number:t,value:parseInt(1e3*n,10)/1e3}})},u={millions:function(t,n,e){var r=a(t,n,o.million);return r=i(r,e),r=s(r,0,t,n)},hundredKs:function(t,n,e){var r=a(t,n,o.hundredThousand);return r=i(r,e),r=s(r,0,t,n)},thousands:function(t,n,e){var r=a(t,n,o.thousand);return r=i(r,e),r=s(r,0,t,n)},hundreds:function(t,n,e){var r=a(t,n,o.hundred);return r=i(r,e),r=s(r,0,t,n)},tens:function(t,n,e){var r=a(t,n,o.ten);return r=i(r,e),r=s(r,0,t,n)},ones:function(t,n,e){var r=a(t,n,o.one);return r=i(r,e),r=s(r,0,t,n)},tenths:function(t,n,e){var r=a(t,n,o.tenth);return r=i(r,e),r=s(r,0,t,n)},hundredths:function(t,n,e){var r=a(t,n,o.hundredth);return r=i(r,e),r=s(r,0,t,n)}};n.exports=u},{"./_constants":1,"./_prettyNum":2,"./_reduce":3}]},{},[4])(4)}),$=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,e=t.scale,i=e.min||0,r=e.max||0,o=B(i,r,n);return o},R=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5,e=t.scale,i=e.min||0,r=e.max||0,o=F(i,r,n);return o},Q=function(t){return(t=parseFloat(t))>=1e9?(t=1e8*parseInt(t/1e8,10))/1e6+"b":t>=1e6?(t=1e5*parseInt(t/1e5,10))/1e6+"m":t>=1e4?(t=1e3*parseInt(t/1e3,10))/1e3+"k":t>=1e3?(t=100*parseInt(t/100,10))/1e3+"k":t.toLocaleString()},H=function(n,e){var i=e.scale.scale,r=null;if("object"===t(n)&&null!==n&&(r=n.label,n=n.value),"string"==typeof n)return{num:(n=v(n)).epoch,pos:parseInt(i(n.epoch),10),label:r||n.format(e._fmt||"{month} {year}")};var o=Number(n);return{num:o,pos:parseInt(i(o),10),label:r||Q(o)}},Z={stroke:"#d7d5d2","stroke-width":1,"vector-effect":"non-scaling-stroke"},U=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;n(this,e),this.world=i,this.attrs=Object.assign({},Z,t),this.scale=null,this._tickCount=6,this._fmt=void 0,this._given=void 0,this._show=!0,this._label=""}return i(e,[{key:"color",value:function(t){return this.attrs.stroke=N[t]||t,this}},{key:"label",value:function(t){return this._label=t,this}},{key:"remove",value:function(){return this._show=!1,this}},{key:"format",value:function(t){return this._fmt=t,this}},{key:"show",value:function(){return this._show=!0,this}},{key:"ticks",value:function(n){var e=this;return"number"==typeof n?this._tickCount=n:"object"===t(n)&&(this._given=n),this._given?this._given.map(function(t){return H(t,e)}):"date"===this.scale.format()?R(this,this._tickCount):$(this,this._tickCount)}}]),e}();function X(){var t=u(["<g>\n      ",'\n      <line x1="','" y1="','" x2="','" y2="','" ...',' stroke="#d7d5d2" />\n      <text ...',">\n        ","\n      </text>\n    </g>"]);return X=function(){return t},t}function G(){var t=u(['<text x="','" y="','" fill="','" text-anchor="middle" class="somehow-legible">\n        ',"\n      </text>"]);return G=function(){return t},t}var V=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),(t=s(this,o(e).call(this,i,r))).scale=r.x,t}return r(e,U),i(e,[{key:"drawTicks",value:function(t){var n=this,e=this.world.html;return this.ticks().map(function(i){return console.log(i.label),e(G(),100*i.value+"%",t+5,n.attrs.stroke,i.label)})}},{key:"build",value:function(){var t=this.world.html;if(!1===this._show)return"";var n=this.attrs,e=this.world.width,i=this.world.height,r=this.drawTicks(i),o={x:"50%",y:"115%",fill:this.attrs.stroke,style:"text-anchor:middle;"};return t(X(),r,0,i,e,i,n,o,this._label)}}]),e}();function W(){var t=u(["<g>\n      ",'\n      <line x1="','" y1="','" x2="','" y2="','" ...',"/>\n      <text ...",">\n        ","\n      </text>\n    </g>"]);return W=function(){return t},t}function K(){var t=u(['<text x="','" y="','" dy="0" dx="-2px" fill="','" text-anchor="end" class="somehow-legible">\n        ',"\n      </text>"]);return K=function(){return t},t}var J=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),(t=s(this,o(e).call(this,i,r))).scale=r.y,t}return r(e,U),i(e,[{key:"drawTicks",value:function(t){var n=this,e=this.world.html;return this.ticks().map(function(i){var r=100*i.value;return r=100-r,e(K(),t,r+"%",n.attrs.stroke,i.label)})}},{key:"build",value:function(){var t=this.world.html;if(!1===this._show)return"";var n=this.attrs,e=this.world.height,i=this.drawTicks(0),r={x:"-5%",y:"50%",fill:this.attrs.stroke,style:"text-anchor:end;"};return t(W(),i,0,0,0,e,n,r,this._label)}}]),e}(),tt=f(function(t,n){!function(t){var n=Math.PI,e=2*n,i=e-1e-6;function r(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new r}r.prototype=o.prototype={constructor:r,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,r,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+r)+","+(this._y1=+o)},arcTo:function(t,e,i,r,o){t=+t,e=+e,i=+i,r=+r,o=+o;var a=this._x1,s=this._y1,u=i-t,h=r-e,c=a-t,l=s-e,f=c*c+l*l;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(f>1e-6)if(Math.abs(l*u-h*c)>1e-6&&o){var d=i-a,y=r-s,p=u*u+h*h,v=d*d+y*y,_=Math.sqrt(p),m=Math.sqrt(f),g=o*Math.tan((n-Math.acos((p+f-v)/(2*_*m)))/2),x=g/m,b=g/_;Math.abs(x-1)>1e-6&&(this._+="L"+(t+x*c)+","+(e+x*l)),this._+="A"+o+","+o+",0,0,"+ +(l*d>c*y)+","+(this._x1=t+b*u)+","+(this._y1=e+b*h)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,r,o,a,s,u){t=+t,r=+r;var h=(o=+o)*Math.cos(a),c=o*Math.sin(a),l=t+h,f=r+c,d=1^u,y=u?a-s:s-a;if(o<0)throw new Error("negative radius: "+o);null===this._x1?this._+="M"+l+","+f:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+l+","+f),o&&(y<0&&(y=y%e+e),y>i?this._+="A"+o+","+o+",0,1,"+d+","+(t-h)+","+(r-c)+"A"+o+","+o+",0,1,"+d+","+(this._x1=l)+","+(this._y1=f):y>1e-6&&(this._+="A"+o+","+o+",0,"+ +(y>=n)+","+d+","+(this._x1=t+o*Math.cos(s))+","+(this._y1=r+o*Math.sin(s))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}},t.path=o,Object.defineProperty(t,"__esModule",{value:!0})}(n)});l(tt);var nt=f(function(t,n){!function(t,n){function e(t){return function(){return t}}var i=Math.abs,r=Math.atan2,o=Math.cos,a=Math.max,s=Math.min,u=Math.sin,h=Math.sqrt,c=1e-12,l=Math.PI,f=l/2,d=2*l;function y(t){return t>=1?f:t<=-1?-f:Math.asin(t)}function p(t){return t.innerRadius}function v(t){return t.outerRadius}function _(t){return t.startAngle}function m(t){return t.endAngle}function g(t){return t&&t.padAngle}function x(t,n,e,i,r,o,s){var u=t-e,c=n-i,l=(s?o:-o)/h(u*u+c*c),f=l*c,d=-l*u,y=t+f,p=n+d,v=e+f,_=i+d,m=(y+v)/2,g=(p+_)/2,x=v-y,b=_-p,k=x*x+b*b,w=r-o,z=y*_-v*p,T=(b<0?-1:1)*h(a(0,w*w*k-z*z)),M=(z*b-x*T)/k,O=(-z*x-b*T)/k,j=(z*b+x*T)/k,S=(-z*x+b*T)/k,E=M-m,P=O-g,N=j-m,D=S-g;return E*E+P*P>N*N+D*D&&(M=j,O=S),{cx:M,cy:O,x01:-f,y01:-d,x11:M*(r/w-1),y11:O*(r/w-1)}}function b(t){this._context=t}function k(t){return new b(t)}function w(t){return t[0]}function z(t){return t[1]}function T(){var t=w,i=z,r=e(!0),o=null,a=k,s=null;function u(e){var u,h,c,l=e.length,f=!1;for(null==o&&(s=a(c=n.path())),u=0;u<=l;++u)!(u<l&&r(h=e[u],u,e))===f&&((f=!f)?s.lineStart():s.lineEnd()),f&&s.point(+t(h,u,e),+i(h,u,e));if(c)return s=null,c+""||null}return u.x=function(n){return arguments.length?(t="function"==typeof n?n:e(+n),u):t},u.y=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),u):i},u.defined=function(t){return arguments.length?(r="function"==typeof t?t:e(!!t),u):r},u.curve=function(t){return arguments.length?(a=t,null!=o&&(s=a(o)),u):a},u.context=function(t){return arguments.length?(null==t?o=s=null:s=a(o=t),u):o},u}function M(){var t=w,i=null,r=e(0),o=z,a=e(!0),s=null,u=k,h=null;function c(e){var c,l,f,d,y,p=e.length,v=!1,_=new Array(p),m=new Array(p);for(null==s&&(h=u(y=n.path())),c=0;c<=p;++c){if(!(c<p&&a(d=e[c],c,e))===v)if(v=!v)l=c,h.areaStart(),h.lineStart();else{for(h.lineEnd(),h.lineStart(),f=c-1;f>=l;--f)h.point(_[f],m[f]);h.lineEnd(),h.areaEnd()}v&&(_[c]=+t(d,c,e),m[c]=+r(d,c,e),h.point(i?+i(d,c,e):_[c],o?+o(d,c,e):m[c]))}if(y)return h=null,y+""||null}function l(){return T().defined(a).curve(u).context(s)}return c.x=function(n){return arguments.length?(t="function"==typeof n?n:e(+n),i=null,c):t},c.x0=function(n){return arguments.length?(t="function"==typeof n?n:e(+n),c):t},c.x1=function(t){return arguments.length?(i=null==t?null:"function"==typeof t?t:e(+t),c):i},c.y=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),o=null,c):r},c.y0=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),c):r},c.y1=function(t){return arguments.length?(o=null==t?null:"function"==typeof t?t:e(+t),c):o},c.lineX0=c.lineY0=function(){return l().x(t).y(r)},c.lineY1=function(){return l().x(t).y(o)},c.lineX1=function(){return l().x(i).y(r)},c.defined=function(t){return arguments.length?(a="function"==typeof t?t:e(!!t),c):a},c.curve=function(t){return arguments.length?(u=t,null!=s&&(h=u(s)),c):u},c.context=function(t){return arguments.length?(null==t?s=h=null:h=u(s=t),c):s},c}function O(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function j(t){return t}b.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var S=P(k);function E(t){this._curve=t}function P(t){function n(n){return new E(t(n))}return n._curve=t,n}function N(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(P(t)):n()._curve},t}function D(){return N(T().curve(S))}function A(){var t=M().curve(S),n=t.curve,e=t.lineX0,i=t.lineX1,r=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return N(e())},delete t.lineX0,t.lineEndAngle=function(){return N(i())},delete t.lineX1,t.lineInnerRadius=function(){return N(r())},delete t.lineY0,t.lineOuterRadius=function(){return N(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(P(t)):n()._curve},t}function C(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}E.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var q=Array.prototype.slice;function I(t){return t.source}function L(t){return t.target}function Y(t){var i=I,r=L,o=w,a=z,s=null;function u(){var e,u=q.call(arguments),h=i.apply(this,u),c=r.apply(this,u);if(s||(s=e=n.path()),t(s,+o.apply(this,(u[0]=h,u)),+a.apply(this,u),+o.apply(this,(u[0]=c,u)),+a.apply(this,u)),e)return s=null,e+""||null}return u.source=function(t){return arguments.length?(i=t,u):i},u.target=function(t){return arguments.length?(r=t,u):r},u.x=function(t){return arguments.length?(o="function"==typeof t?t:e(+t),u):o},u.y=function(t){return arguments.length?(a="function"==typeof t?t:e(+t),u):a},u.context=function(t){return arguments.length?(s=null==t?null:t,u):s},u}function F(t,n,e,i,r){t.moveTo(n,e),t.bezierCurveTo(n=(n+i)/2,e,n,r,i,r)}function B(t,n,e,i,r){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+r)/2,i,e,i,r)}function $(t,n,e,i,r){var o=C(n,e),a=C(n,e=(e+r)/2),s=C(i,e),u=C(i,r);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],s[0],s[1],u[0],u[1])}var R={draw:function(t,n){var e=Math.sqrt(n/l);t.moveTo(e,0),t.arc(0,0,e,0,d)}},Q={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},H=Math.sqrt(1/3),Z=2*H,U={draw:function(t,n){var e=Math.sqrt(n/Z),i=e*H;t.moveTo(0,-e),t.lineTo(i,0),t.lineTo(0,e),t.lineTo(-i,0),t.closePath()}},X=Math.sin(l/10)/Math.sin(7*l/10),G=Math.sin(d/10)*X,V=-Math.cos(d/10)*X,W={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),i=G*e,r=V*e;t.moveTo(0,-e),t.lineTo(i,r);for(var o=1;o<5;++o){var a=d*o/5,s=Math.cos(a),u=Math.sin(a);t.lineTo(u*e,-s*e),t.lineTo(s*i-u*r,u*i+s*r)}t.closePath()}},K={draw:function(t,n){var e=Math.sqrt(n),i=-e/2;t.rect(i,i,e,e)}},J=Math.sqrt(3),tt={draw:function(t,n){var e=-Math.sqrt(n/(3*J));t.moveTo(0,2*e),t.lineTo(-J*e,-e),t.lineTo(J*e,-e),t.closePath()}},nt=-.5,et=Math.sqrt(3)/2,it=1/Math.sqrt(12),rt=3*(it/2+1),ot={draw:function(t,n){var e=Math.sqrt(n/rt),i=e/2,r=e*it,o=i,a=e*it+e,s=-o,u=a;t.moveTo(i,r),t.lineTo(o,a),t.lineTo(s,u),t.lineTo(nt*i-et*r,et*i+nt*r),t.lineTo(nt*o-et*a,et*o+nt*a),t.lineTo(nt*s-et*u,et*s+nt*u),t.lineTo(nt*i+et*r,nt*r-et*i),t.lineTo(nt*o+et*a,nt*a-et*o),t.lineTo(nt*s+et*u,nt*u-et*s),t.closePath()}},at=[R,Q,U,K,W,tt,ot];function st(){}function ut(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function ht(t){this._context=t}function ct(t){this._context=t}function lt(t){this._context=t}function ft(t,n){this._basis=new ht(t),this._beta=n}ht.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ut(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ut(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},ct.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:ut(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,i=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,i):this._context.moveTo(e,i);break;case 3:this._point=4;default:ut(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},ft.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var i,r=t[0],o=n[0],a=t[e]-r,s=n[e]-o,u=-1;++u<=e;)i=u/e,this._basis.point(this._beta*t[u]+(1-this._beta)*(r+i*a),this._beta*n[u]+(1-this._beta)*(o+i*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var dt=function t(n){function e(t){return 1===n?new ht(t):new ft(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function yt(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function pt(t,n){this._context=t,this._k=(1-n)/6}pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:yt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:yt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var vt=function t(n){function e(t){return new pt(t,n)}return e.tension=function(n){return t(+n)},e}(0);function _t(t,n){this._context=t,this._k=(1-n)/6}_t.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:yt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var mt=function t(n){function e(t){return new _t(t,n)}return e.tension=function(n){return t(+n)},e}(0);function gt(t,n){this._context=t,this._k=(1-n)/6}gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:yt(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var xt=function t(n){function e(t){return new gt(t,n)}return e.tension=function(n){return t(+n)},e}(0);function bt(t,n,e){var i=t._x1,r=t._y1,o=t._x2,a=t._y2;if(t._l01_a>c){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,u=3*t._l01_a*(t._l01_a+t._l12_a);i=(i*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/u,r=(r*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/u}if(t._l23_a>c){var h=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,l=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*h+t._x1*t._l23_2a-n*t._l12_2a)/l,a=(a*h+t._y1*t._l23_2a-e*t._l12_2a)/l}t._context.bezierCurveTo(i,r,o,a,t._x2,t._y2)}function kt(t,n){this._context=t,this._alpha=n}kt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:bt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var wt=function t(n){function e(t){return n?new kt(t,n):new pt(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function zt(t,n){this._context=t,this._alpha=n}zt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:bt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Tt=function t(n){function e(t){return n?new zt(t,n):new _t(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function Mt(t,n){this._context=t,this._alpha=n}Mt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,i=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+i*i,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:bt(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var Ot=function t(n){function e(t){return n?new Mt(t,n):new gt(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function jt(t){this._context=t}function St(t){return t<0?-1:1}function Et(t,n,e){var i=t._x1-t._x0,r=n-t._x1,o=(t._y1-t._y0)/(i||r<0&&-0),a=(e-t._y1)/(r||i<0&&-0),s=(o*r+a*i)/(i+r);return(St(o)+St(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Pt(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function Nt(t,n,e){var i=t._x0,r=t._y0,o=t._x1,a=t._y1,s=(o-i)/3;t._context.bezierCurveTo(i+s,r+s*n,o-s,a-s*e,o,a)}function Dt(t){this._context=t}function At(t){this._context=new Ct(t)}function Ct(t){this._context=t}function qt(t){this._context=t}function It(t){var n,e,i=t.length-1,r=new Array(i),o=new Array(i),a=new Array(i);for(r[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<i-1;++n)r[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(r[i-1]=2,o[i-1]=7,a[i-1]=8*t[i-1]+t[i],n=1;n<i;++n)e=r[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(r[i-1]=a[i-1]/o[i-1],n=i-2;n>=0;--n)r[n]=(a[n]-r[n+1])/o[n];for(o[i-1]=(t[i]+r[i-1])/2,n=0;n<i-1;++n)o[n]=2*t[n+1]-r[n+1];return[r,o]}function Lt(t,n){this._context=t,this._t=n}function Yt(t,n){if((r=t.length)>1)for(var e,i,r,o=1,a=t[n[0]],s=a.length;o<r;++o)for(i=a,a=t[n[o]],e=0;e<s;++e)a[e][1]+=a[e][0]=isNaN(i[e][1])?i[e][0]:i[e][1]}function Ft(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function Bt(t,n){return t[n]}function $t(t){var n=t.map(Rt);return Ft(t).sort(function(t,e){return n[t]-n[e]})}function Rt(t){for(var n,e=-1,i=0,r=t.length,o=-1/0;++e<r;)(n=+t[e][1])>o&&(o=n,i=e);return i}function Qt(t){var n=t.map(Ht);return Ft(t).sort(function(t,e){return n[t]-n[e]})}function Ht(t){for(var n,e=0,i=-1,r=t.length;++i<r;)(n=+t[i][1])&&(e+=n);return e}jt.prototype={areaStart:st,areaEnd:st,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},Dt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Nt(this,this._t0,Pt(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,Nt(this,Pt(this,e=Et(this,t,n)),e);break;default:Nt(this,this._t0,e=Et(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(At.prototype=Object.create(Dt.prototype)).point=function(t,n){Dt.prototype.point.call(this,n,t)},Ct.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,i,r,o){this._context.bezierCurveTo(n,t,i,e,o,r)}},qt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var i=It(t),r=It(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(i[0][o],r[0][o],i[1][o],r[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}},t.arc=function(){var t=p,a=v,b=e(0),k=null,w=_,z=m,T=g,M=null;function O(){var e,p,v=+t.apply(this,arguments),_=+a.apply(this,arguments),m=w.apply(this,arguments)-f,g=z.apply(this,arguments)-f,O=i(g-m),j=g>m;if(M||(M=e=n.path()),_<v&&(p=_,_=v,v=p),_>c)if(O>d-c)M.moveTo(_*o(m),_*u(m)),M.arc(0,0,_,m,g,!j),v>c&&(M.moveTo(v*o(g),v*u(g)),M.arc(0,0,v,g,m,j));else{var S,E,P=m,N=g,D=m,A=g,C=O,q=O,I=T.apply(this,arguments)/2,L=I>c&&(k?+k.apply(this,arguments):h(v*v+_*_)),Y=s(i(_-v)/2,+b.apply(this,arguments)),F=Y,B=Y;if(L>c){var $=y(L/v*u(I)),R=y(L/_*u(I));(C-=2*$)>c?(D+=$*=j?1:-1,A-=$):(C=0,D=A=(m+g)/2),(q-=2*R)>c?(P+=R*=j?1:-1,N-=R):(q=0,P=N=(m+g)/2)}var Q=_*o(P),H=_*u(P),Z=v*o(A),U=v*u(A);if(Y>c){var X,G=_*o(N),V=_*u(N),W=v*o(D),K=v*u(D);if(O<l&&(X=function(t,n,e,i,r,o,a,s){var u=e-t,h=i-n,l=a-r,f=s-o,d=f*u-l*h;if(!(d*d<c))return[t+(d=(l*(n-o)-f*(t-r))/d)*u,n+d*h]}(Q,H,W,K,G,V,Z,U))){var J=Q-X[0],tt=H-X[1],nt=G-X[0],et=V-X[1],it=1/u(function(t){return t>1?0:t<-1?l:Math.acos(t)}((J*nt+tt*et)/(h(J*J+tt*tt)*h(nt*nt+et*et)))/2),rt=h(X[0]*X[0]+X[1]*X[1]);F=s(Y,(v-rt)/(it-1)),B=s(Y,(_-rt)/(it+1))}}q>c?B>c?(S=x(W,K,Q,H,_,B,j),E=x(G,V,Z,U,_,B,j),M.moveTo(S.cx+S.x01,S.cy+S.y01),B<Y?M.arc(S.cx,S.cy,B,r(S.y01,S.x01),r(E.y01,E.x01),!j):(M.arc(S.cx,S.cy,B,r(S.y01,S.x01),r(S.y11,S.x11),!j),M.arc(0,0,_,r(S.cy+S.y11,S.cx+S.x11),r(E.cy+E.y11,E.cx+E.x11),!j),M.arc(E.cx,E.cy,B,r(E.y11,E.x11),r(E.y01,E.x01),!j))):(M.moveTo(Q,H),M.arc(0,0,_,P,N,!j)):M.moveTo(Q,H),v>c&&C>c?F>c?(S=x(Z,U,G,V,v,-F,j),E=x(Q,H,W,K,v,-F,j),M.lineTo(S.cx+S.x01,S.cy+S.y01),F<Y?M.arc(S.cx,S.cy,F,r(S.y01,S.x01),r(E.y01,E.x01),!j):(M.arc(S.cx,S.cy,F,r(S.y01,S.x01),r(S.y11,S.x11),!j),M.arc(0,0,v,r(S.cy+S.y11,S.cx+S.x11),r(E.cy+E.y11,E.cx+E.x11),j),M.arc(E.cx,E.cy,F,r(E.y11,E.x11),r(E.y01,E.x01),!j))):M.arc(0,0,v,A,D,j):M.lineTo(Z,U)}else M.moveTo(0,0);if(M.closePath(),e)return M=null,e+""||null}return O.centroid=function(){var n=(+t.apply(this,arguments)+ +a.apply(this,arguments))/2,e=(+w.apply(this,arguments)+ +z.apply(this,arguments))/2-l/2;return[o(e)*n,u(e)*n]},O.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:e(+n),O):t},O.outerRadius=function(t){return arguments.length?(a="function"==typeof t?t:e(+t),O):a},O.cornerRadius=function(t){return arguments.length?(b="function"==typeof t?t:e(+t),O):b},O.padRadius=function(t){return arguments.length?(k=null==t?null:"function"==typeof t?t:e(+t),O):k},O.startAngle=function(t){return arguments.length?(w="function"==typeof t?t:e(+t),O):w},O.endAngle=function(t){return arguments.length?(z="function"==typeof t?t:e(+t),O):z},O.padAngle=function(t){return arguments.length?(T="function"==typeof t?t:e(+t),O):T},O.context=function(t){return arguments.length?(M=null==t?null:t,O):M},O},t.area=M,t.line=T,t.pie=function(){var t=j,n=O,i=null,r=e(0),o=e(d),a=e(0);function s(e){var s,u,h,c,l,f=e.length,y=0,p=new Array(f),v=new Array(f),_=+r.apply(this,arguments),m=Math.min(d,Math.max(-d,o.apply(this,arguments)-_)),g=Math.min(Math.abs(m)/f,a.apply(this,arguments)),x=g*(m<0?-1:1);for(s=0;s<f;++s)(l=v[p[s]=s]=+t(e[s],s,e))>0&&(y+=l);for(null!=n?p.sort(function(t,e){return n(v[t],v[e])}):null!=i&&p.sort(function(t,n){return i(e[t],e[n])}),s=0,h=y?(m-f*x)/y:0;s<f;++s,_=c)u=p[s],c=_+((l=v[u])>0?l*h:0)+x,v[u]={data:e[u],index:s,value:l,startAngle:_,endAngle:c,padAngle:g};return v}return s.value=function(n){return arguments.length?(t="function"==typeof n?n:e(+n),s):t},s.sortValues=function(t){return arguments.length?(n=t,i=null,s):n},s.sort=function(t){return arguments.length?(i=t,n=null,s):i},s.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),s):r},s.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:e(+t),s):o},s.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:e(+t),s):a},s},t.areaRadial=A,t.radialArea=A,t.lineRadial=D,t.radialLine=D,t.pointRadial=C,t.linkHorizontal=function(){return Y(F)},t.linkVertical=function(){return Y(B)},t.linkRadial=function(){var t=Y($);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=e(R),i=e(64),r=null;function o(){var e;if(r||(r=e=n.path()),t.apply(this,arguments).draw(r,+i.apply(this,arguments)),e)return r=null,e+""||null}return o.type=function(n){return arguments.length?(t="function"==typeof n?n:e(n),o):t},o.size=function(t){return arguments.length?(i="function"==typeof t?t:e(+t),o):i},o.context=function(t){return arguments.length?(r=null==t?null:t,o):r},o},t.symbols=at,t.symbolCircle=R,t.symbolCross=Q,t.symbolDiamond=U,t.symbolSquare=K,t.symbolStar=W,t.symbolTriangle=tt,t.symbolWye=ot,t.curveBasisClosed=function(t){return new ct(t)},t.curveBasisOpen=function(t){return new lt(t)},t.curveBasis=function(t){return new ht(t)},t.curveBundle=dt,t.curveCardinalClosed=mt,t.curveCardinalOpen=xt,t.curveCardinal=vt,t.curveCatmullRomClosed=Tt,t.curveCatmullRomOpen=Ot,t.curveCatmullRom=wt,t.curveLinearClosed=function(t){return new jt(t)},t.curveLinear=k,t.curveMonotoneX=function(t){return new Dt(t)},t.curveMonotoneY=function(t){return new At(t)},t.curveNatural=function(t){return new qt(t)},t.curveStep=function(t){return new Lt(t,.5)},t.curveStepAfter=function(t){return new Lt(t,1)},t.curveStepBefore=function(t){return new Lt(t,0)},t.stack=function(){var t=e([]),n=Ft,i=Yt,r=Bt;function o(e){var o,a,s=t.apply(this,arguments),u=e.length,h=s.length,c=new Array(h);for(o=0;o<h;++o){for(var l,f=s[o],d=c[o]=new Array(u),y=0;y<u;++y)d[y]=l=[0,+r(e[y],f,y,e)],l.data=e[y];d.key=f}for(o=0,a=n(c);o<h;++o)c[a[o]].index=o;return i(c,a),c}return o.keys=function(n){return arguments.length?(t="function"==typeof n?n:e(q.call(n)),o):t},o.value=function(t){return arguments.length?(r="function"==typeof t?t:e(+t),o):r},o.order=function(t){return arguments.length?(n=null==t?Ft:"function"==typeof t?t:e(q.call(t)),o):n},o.offset=function(t){return arguments.length?(i=null==t?Yt:t,o):i},o},t.stackOffsetExpand=function(t,n){if((i=t.length)>0){for(var e,i,r,o=0,a=t[0].length;o<a;++o){for(r=e=0;e<i;++e)r+=t[e][o][1]||0;if(r)for(e=0;e<i;++e)t[e][o][1]/=r}Yt(t,n)}},t.stackOffsetDiverging=function(t,n){if((s=t.length)>0)for(var e,i,r,o,a,s,u=0,h=t[n[0]].length;u<h;++u)for(o=a=0,e=0;e<s;++e)(r=(i=t[n[e]][u])[1]-i[0])>=0?(i[0]=o,i[1]=o+=r):r<0?(i[1]=a,i[0]=a+=r):i[0]=o},t.stackOffsetNone=Yt,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,i=0,r=t[n[0]],o=r.length;i<o;++i){for(var a=0,s=0;a<e;++a)s+=t[a][i][1]||0;r[i][1]+=r[i][0]=-s/2}Yt(t,n)}},t.stackOffsetWiggle=function(t,n){if((r=t.length)>0&&(i=(e=t[n[0]]).length)>0){for(var e,i,r,o=0,a=1;a<i;++a){for(var s=0,u=0,h=0;s<r;++s){for(var c=t[n[s]],l=c[a][1]||0,f=(l-(c[a-1][1]||0))/2,d=0;d<s;++d){var y=t[n[d]];f+=(y[a][1]||0)-(y[a-1][1]||0)}u+=l,h+=f*l}e[a-1][1]+=e[a-1][0]=o,u&&(o-=h/u)}e[a-1][1]+=e[a-1][0]=o,Yt(t,n)}},t.stackOrderAppearance=$t,t.stackOrderAscending=Qt,t.stackOrderDescending=function(t){return Qt(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,i=t.length,r=t.map(Ht),o=$t(t),a=0,s=0,u=[],h=[];for(n=0;n<i;++n)e=o[n],a<s?(a+=r[e],u.push(e)):(s+=r[e],h.push(e));return h.reverse().concat(u)},t.stackOrderNone=Ft,t.stackOrderReverse=function(t){return Ft(t).reverse()},Object.defineProperty(t,"__esModule",{value:!0})}(n,tt)});l(nt);var et=m,it=g,rt=function(t,n){return"string"==typeof t?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0,e=t.split(/\n/g);return e=(e=e.filter(function(t){return t})).map(function(t){var e=t.split(/(,|\t) ?/).map(function(t){return t.trim()}),i={x:et(e[0],n),y:it(e[2],n)};return void 0!==e[4]&&(i.y2=it(e[4],n)),i})}(t,n):t.map(function(t){var e={x:et(t[0],n),y:it(t[1],n)};return void 0!==t[2]&&(e.y2=it(t[2],n)),e})};function ot(){var t=u(["<path ..."," id=",' style="','"/>']);return ot=function(){return t},t}var at=N.colors,st=m,ut=g,ht={fill:at.blue,stroke:"none","shape-rendering":"optimizeQuality","vector-effect":"non-scaling-stroke"},ct=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;n(this,t),this.world=i,this.data=e.data||[],this._id=e.id||x.uid("input"),this.attrs=Object.assign({},ht,e),this.style={},this.curve=nt.curveMonotoneX,this._shape=1,this._title="",this._click=e.click,this._hover=e.hover,this._dx=0,this._dy=0,this.ignore_clip=!1}return i(t,[{key:"clip",value:function(t){return this.ignore_clip=t,this}},{key:"straight",value:function(){return this.curve=nt.curveLinear,this}},{key:"id",value:function(t){return this._id=t,this}},{key:"soft",value:function(){return this.curve=nt.curveBasis,this}},{key:"dx",value:function(t){return this._dx=t,this}},{key:"dy",value:function(t){return this._dy=t,this}},{key:"at",value:function(t,n){return!t&&0!==t||!n&&0!==n?t||0===t?(this.set([[t,"0%"],[t,"100%"]]),this):((n||0===n)&&this.set([["0%",n],["100%",n]]),this):(this.set([[t,n]]),this)}},{key:"extent",value:function(){var t=[],n=[];return this.data.forEach(function(e){"pixel"!==e.x.type&&t.push(e.x.value),"pixel"!==e.y.type&&n.push(e.y.value),e.y2&&"pixel"!==e.y2.type&&n.push(e.y2.value)}),{x:x.extent(t),y:x.extent(n)}}},{key:"color",value:function(t){return this.attrs.fill=at[t]||t,this}},{key:"opacity",value:function(t){return this.attrs.opacity=t,this}},{key:"title",value:function(t){return this._title=t,this}},{key:"set",value:function(t){return this.data=rt(t,this.world),this}},{key:"from",value:function(t,n){return this.data[0]={x:st(t,this.world),y:ut(n,this.world)},this}},{key:"to",value:function(t,n){return this.data[1]={x:st(t,this.world),y:ut(n,this.world)},this}},{key:"onMount",value:function(){var t=this;(this._click||this._hover)&&setTimeout(function(){var n=document.getElementById(t._id);n&&(t._click&&n.addEventListener("click",function(){t._click(t)}),t._hover&&n.addEventListener("mouseenter",function(){t._hover(t)}))},50)}},{key:"click",value:function(t){this._click=t}},{key:"hover",value:function(t){this._hover=t}},{key:"points",value:function(){var t=this,n=this.world,e=n.x,i=n.y,r=this.data.map(function(n){var r=[e.place(n.x),i.place(n.y)];return void 0!==n.y2&&r.push(i.place(n.y2)),r[0]+=t._dx,r[1]+=t._dy,r});return r}},{key:"path",value:function(){var t=this.world.y.place(ut(0)),n=this.points();return nt.area().x0(function(t){return t[0]}).y0(function(t){return t[1]}).y1(t).curve(nt.curveMonotoneX)(n)}},{key:"drawSyle",value:function(){var t=this;return Object.keys(this.style).map(function(n){return"".concat(n,":").concat(t.style[n],";")}).join(" ")}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=Object.assign({},this.attrs,{d:this.path()});return t(ot(),n,this._id,this.drawSyle())}}]),t}();function lt(){var t=u(["<path ...",' style="','">\n        <title>',"</title>\n      </path>"]);return lt=function(){return t},t}function ft(){var t=u(["<path ...",' style="','"/>']);return ft=function(){return t},t}var dt=N.colors,yt=g,pt={fill:dt.green,stroke:dt.green,"fill-opacity":.25,"stroke-width":2},vt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),i=Object.assign({},pt,i),(t=s(this,o(e).call(this,i,r)))._line=2,t}return r(e,ct),i(e,[{key:"color",value:function(t){return this.attrs.stroke=dt[t]||t,this.attrs.fill=dt[t]||t,this}},{key:"line",value:function(t){this._line=t}},{key:"opacity",value:function(t){return this.attrs["fill-opacity"]=t,this}},{key:"areaPath",value:function(){var t=this.points();if(t[0]&&3===t[0].length)return nt.area().x(function(t){return t[0]}).y(function(t){return t[1]}).y1(function(t){return t[2]}).curve(this.curve)(t);var n=this.world.y.place(yt(0));return nt.area().x0(function(t){return t[0]}).y0(function(t){return t[1]}).y1(n).curve(this.curve)(t)}},{key:"linePath",value:function(){var t=this.points();return t[0]&&3===t[0].length?nt.area().x(function(t){return t[0]}).y(function(t){return t[1]}).y1(function(t){return t[2]}).curve(this.curve)(t):nt.area().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(this.curve)(t)}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=Object.assign({},this.attrs,{d:this.areaPath(),stroke:"none"}),e=t(ft(),n,this.drawSyle());if(!this._line)return e;var i=Object.assign({},this.attrs,{d:this.linePath(),fill:"none"});return[t(lt(),i,this.drawSyle(),this._title),e]}}]),e}();function _t(){var t=u(["<rect ..."," >\n      <title>","</title>\n    </rect>"]);return _t=function(){return t},t}var mt=N.colors,gt={fill:mt.green,stroke:mt.green,"fill-opacity":.25,"stroke-width":1},xt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),i=Object.assign({},gt,i),(t=s(this,o(e).call(this,i,r)))._rounded=3,t._width=void 0,t._height=void 0,t}return r(e,ct),i(e,[{key:"color",value:function(t){return this.attrs.stroke=mt[t]||t,this.attrs.fill=mt[t]||t,this}},{key:"border",value:function(t){return this.attrs["stroke-width"]=t,this}},{key:"opacity",value:function(t){return this.attrs["fill-opacity"]=t,this}},{key:"width",value:function(t){return this._width=t,this}},{key:"height",value:function(t){return this._height=t,this}},{key:"rounded",value:function(t){this._rounded=t}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=this.points(),e=n[0],i=n[1]||0,r=Math.abs(i[0]-e[0]),o=Math.abs(i[1]-e[1]);void 0!==this._width&&(r=this._width),void 0!==this._height&&(o=this._height);var a=Object.assign({},this.attrs,{x:e[0],y:e[1]-o,width:r,height:o,rx:this._rounded});return t(_t(),a,this._title)}}]),e}(),bt=N.colors,kt={fill:"none",stroke:bt.blue,"stroke-width":4,"stroke-linecap":"round"},wt=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1?arguments[1]:void 0;return n(this,e),t=Object.assign({},kt,t),s(this,o(e).call(this,t,i))}return r(e,ct),i(e,[{key:"color",value:function(t){return this.attrs.stroke=bt[t]||t,this}},{key:"dotted",value:function(t){return!0===t&&(t=4),this.attrs["stroke-dasharray"]=t||4,this}},{key:"width",value:function(t){return this.attrs["stroke-width"]=t,this}},{key:"path",value:function(){var t=this.points();return nt.line().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(this.curve)(t)}}]),e}();function zt(){var t=u(['<g transform="','" style="','">\n      <text ...',' class="somehow-legible">\n        ',"\n      </text>\n    </g>"]);return zt=function(){return t},t}function Tt(){var t=u(['<tspan x="0" dy="1.2em" >',"</tspan>"]);return Tt=function(){return t},t}var Mt=N.colors,Ot={fill:"grey",stroke:"none","stroke-width":1,"stroke-linecap":"round","font-size":5},jt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;n(this,e);var a=null,u=null;return"string"==typeof i?(a=[i],i={}):"function"==typeof i?(u=i,i={}):Array.isArray(i)&&(a=i,i=[]),i=Object.assign({},Ot,i),(t=s(this,o(e).call(this,i,r))).textLines=a||i.text||[],t.textFn=u,"string"==typeof t.textLines&&(t.textLines=[t.textLines]),t._order=0,t.data=[{x:{value:50,type:"percent"},y:{value:50,type:"percent"}}],t._dodge={x:0,y:4},t._underline="",t}return r(e,ct),i(e,[{key:"before",value:function(t,n){return this.attrs["text-anchor"]="end",this.set([[t,n]]),this}},{key:"after",value:function(t,n){return this.attrs["text-anchor"]="start",this.set([[t,n]]),this}},{key:"center",value:function(t,n){return this.attrs["text-anchor"]="middle",void 0!==t&&this.set([[t,n]]),this}},{key:"left",value:function(){return this.attrs["text-anchor"]="start",this}},{key:"right",value:function(){return this.attrs["text-anchor"]="end",this}},{key:"color",value:function(t){return this.attrs.fill=Mt[t]||t,this}},{key:"dy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._dodge.y=-1*t,this}},{key:"dx",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._dodge.x=t,this}},{key:"dodge",value:function(t,n){return t=t||this._dodge.x,n=n||this._dodge.y,this._dodge.x=-1*t,this._dodge.y=-1*n,this}},{key:"font",value:function(t){return"number"==typeof t&&(t+="px"),this.style["font-size"]=t,this}},{key:"size",value:function(t){return this.font(t)}},{key:"extent",value:function(){var t=this.data[0]||{};return{x:{min:t.x.value,max:t.x.value},y:{min:t.y.value,max:t.y.value}}}},{key:"text",value:function(t){return"string"==typeof t?this.textLines=[t]:"function"==typeof t?(this.textLines=[],this.textFn=t):this.textLines=t,this}},{key:"path",value:function(){return""}},{key:"estimate",value:function(){var t=this.textLines;null!==this.textFn&&(t="string"==typeof(t=this.textFn(this.world))?[t]:t);var n=24;if(this.style["font-size"]){var e=this.style["font-size"].replace("px","");n=1.5*(e=Number(e))}n*=t.length;var i=0;return t.forEach(function(t){var n=8*t.length;n>i&&(i=n)}),{height:n,width:i}}},{key:"position",value:function(){var t=this.points()[0],n={x:0,y:0};if(!t)return n;var e=this.estimate(),i=e.height,r=e.width;return n.height=i,n.width=r,n.y=t[1]+this._dodge.y-i,n.x=t[0]+2+this._dodge.x,n}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=this.textLines;null!==this.textFn&&(n="string"==typeof(n=this.textFn(this.world))?[n]:n),console.log(this.attrs);var e=n.map(function(n){return t(Tt(),String(n))}),i=this.position(),r=i.x,o=i.y,a="translate(".concat(r," ").concat(o,")");return t(zt(),a,this.drawSyle(),this.attrs,e)}}]),e}();function St(){var t=u(["<circle ..."," ><title>","</title></circle>"]);return St=function(){return t},t}var Et={fill:N.colors.blue,stroke:"none"},Pt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),i=Object.assign({},Et,i),(t=s(this,o(e).call(this,i,r)))._radius=i.radius||5,t}return r(e,ct),i(e,[{key:"radius",value:function(t){return this._radius=t,this}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=this.points()[0],e=Object.assign({},this.attrs,{id:this._id,cx:n[0],cy:n[1],r:this._radius});return t(St(),e,this._title)}}]),e}();function Nt(){var t=u(['<g id="build">\n      ',"\n      ","\n      ","\n    </g>"]);return Nt=function(){return t},t}function Dt(){var t=u(['<line id="line" x1="','" y1="','" x2="','" y2="','" style="stroke-width:2px; shapeRendering:optimizeQuality;" vector-effect="non-scaling-stroke" stroke=',"/>"]);return Dt=function(){return t},t}function At(){var t=u(['<g>\n      <line x1="','" y1="','" x2="','" y2="','" style="','" stroke=',"/>\n      ","\n    </g>"]);return At=function(){return t},t}function Ct(){var t=u(['<g>\n        <line x1="','" y1="','" x2="','" y2="','" style="','" stroke=','/>\n        <line x1="','" y1="','" x2="','" y2="','" style="','" stroke=',"/>\n      </g>\n      "]);return Ct=function(){return t},t}function qt(){var t=u(['<g>\n      <line x1="','" y1="','" x2="','" y2="','" style="','" stroke=','/>\n      <line x1="','" y1="','" x2="','" y2="','" style="','" stroke=',"/>\n    </g>\n    "]);return qt=function(){return t},t}function It(){var t=u(['<g transform="','" style="','">\n      <text ...',">\n        ",'\n      </text>\n      <line x1="','" y1="','" x2="','" y2="','" style="stroke-width:1.5px; shapeRendering:optimizeQuality; vector-effect: non-scaling-stroke;"  stroke=',"/>\n    </g>"]);return It=function(){return t},t}function Lt(){var t=u(['<tspan x="0" dy="1.2em">',"</tspan>"]);return Lt=function(){return t},t}var Yt=N.colors,Ft={"text-anchor":"start","font-size":5,class:"somehow-legible"},Bt=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),(t=s(this,o(e).call(this,i,r))).attrs=Object.assign({},Ft,t.attrs),t._nudge={x:0,y:0},t._title="",t}return r(e,jt),i(e,[{key:"on",value:function(t,n){return this.at(t,n),this}},{key:"title",value:function(t){return this._title=t,this}},{key:"nudge",value:function(t,n){return this._nudge.x=t,this._nudge.y=n,this}},{key:"drawText",value:function(){var t=this.world.html,n=this._nudge,e=this.textLines;null!==this.textFn&&(e="string"==typeof(e=this.textFn(this.world))?[e]:e);var i=e.map(function(n){return t(Lt(),String(n))}),r=this.position(),o=this.estimate(),a={x:r.x+n.x,y:r.y-n.y},s="translate(".concat(a.x," ").concat(a.y,")");return t(It(),s,this.drawSyle(),this.attrs,i,-2,o.height,o.width,o.height,Yt.grey)}},{key:"drawRange",value:function(){var t=this.world.html,n=this.points();if(n.length<=1)return null;var e="stroke-width:2px; shapeRendering:optimizeQuality; vector-effect: non-scaling-stroke;",i=n[0],r=n[1],o=t(qt(),i[0]-4,i[1],i[0]+4,i[1],e,Yt.grey,r[0]-4,r[1],r[0]+4,r[1],e,Yt.grey);return i[0]!==r[0]&&(o=t(Ct(),i[0],i[1]-4,i[0],i[1]+4,e,Yt.grey,r[0],r[1]-4,r[0],r[1]+4,e,Yt.grey)),t(At(),i[0],i[1],r[0],r[1],e,Yt.grey,o)}},{key:"getPoint",value:function(){var t=this.points();if(t.length<=1)return t[0];var n=t[0][0]-t[1][0],e=t[0][1]-t[1][1];return[t[0][0]-n/2,t[0][1]-e/2]}},{key:"drawLine",value:function(){var t=this.world.html,n=this._nudge,e=this.getPoint(),i=this.points()[0],r={x:i[0]+n.x,y:i[1]-n.y+4};if(n.x<0){var o=this.estimate();r.x+=o.width}return t(Dt(),r.x,r.y,e[0],e[1],Yt.grey)}},{key:"build",value:function(){var t=this.world.html;return this.onMount(),t(Nt(),this.drawText(),this.drawLine(),this.drawRange())}}]),e}();function $t(){var t=u(["<path ...",' style="','"/>']);return $t=function(){return t},t}function Rt(){var t=u(["<path ...",' style="','"/>']);return Rt=function(){return t},t}function Qt(){var t=u(["<path ...",' style="','">\n      <title>',"</title>\n    </path>"]);return Qt=function(){return t},t}var Ht=g,Zt=function(t){function e(t,i){var r;return n(this,e),(r=s(this,o(e).call(this,t,i)))._zero=r.world.y.place(Ht(0)),r}return r(e,vt),i(e,[{key:"zero",value:function(t){this._zero=t}},{key:"opacity",value:function(t){return this.attrs["fill-opacity"]=t,this}},{key:"set",value:function(t){return this.data=rt(t,this.world),this.data.forEach(function(t){t.y.value/=2,t.y2=Object.assign({},t.y),t.y2.value*=-1}),this}},{key:"topLine",value:function(t){return nt.line().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(this.curve)(t)}},{key:"bottomLine",value:function(t){return nt.line().x(function(t){return t[0]}).y(function(t){return t[2]}).curve(this.curve)(t)}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=Object.assign({},this.attrs,{d:this.areaPath(),stroke:"none"}),e=t(Qt(),n,this.drawSyle(),this._title);if(!this._line)return e;var i=this.points(),r=Object.assign({},this.attrs,{d:this.topLine(i),fill:"none"});r=t(Rt(),r,this.drawSyle());var o=Object.assign({},this.attrs,{d:this.bottomLine(i),fill:"none"});return[r,e,o=t($t(),o,this.drawSyle())]}}]),e}();function Ut(){var t=u(["<rect ..."," >\n        <title>","</title>\n      </rect>"]);return Ut=function(){return t},t}var Xt=N.colors,Gt=m,Vt=g,Wt={fill:Xt.green,stroke:Xt.green,"fill-opacity":1,"stroke-width":1},Kt=function(t){function e(t,i){var r;return n(this,e),t=Object.assign({},Wt,t),(r=s(this,o(e).call(this,t,i)))._rounded=1,r._width=5,r._zero=0,r}return r(e,xt),i(e,[{key:"width",value:function(t){return this._width=t,this}},{key:"zero",value:function(t){return this._zero=t,this}},{key:"opacity",value:function(t){return this.attrs["fill-opacity"]=t,this}},{key:"at",value:function(t,n){return this.data=[{x:Gt(t,this.world),y:Vt(0,this.world)},{x:Gt(t,this.world),y:Vt(n,this.world)}],this}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=this.points(),e=n[0][1];n[0][1]>n[1][1]&&(e=n[1][1]);var i=Math.abs(n[1][1]-n[0][1]),r=Object.assign({},this.attrs,{x:n[0][0],y:e,width:this._width,height:i,rx:this._rounded,title:this._title});return t(Ut(),r,this._title)}}]),e}();function Jt(){var t=u(['<g>\n      <image xlink:href="','" x="','" y="','" height="','" width="','" />\n      ',"\n    </g>\n    "]);return Jt=function(){return t},t}function tn(){var t=u(['<text x="','" y="','" stroke="none" fill="','">',"</text>"]);return tn=function(){return t},t}var nn=N.colors,en=function(t){function e(t,i){var r;return n(this,e),(r=s(this,o(e).call(this,t,i)))._src="",r._width=100,r._height=200,r._caption="",r}return r(e,ct),i(e,[{key:"src",value:function(t){return this._src=t,this}},{key:"caption",value:function(t){return this._caption=t,this}},{key:"size",value:function(t,n){return this._width=t,this._height=n,this}},{key:"width",value:function(t){return this._width=t,this}},{key:"height",value:function(t){return this._height=t,this}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=this.points()[0];n||(n=[0,0]);var e="";if(this._caption){var i=n[1]+this._height+15;e=t(tn(),n[0],i,nn.grey,this._caption)}return t(Jt(),this._src,n[0],n[1],this._width,this._height,e)}}]),e}();function rn(){var t=u(["<g>\n      <line x1="," y1="," x2="," y2="," ...","/>\n      ","\n    </g>"]);return rn=function(){return t},t}function on(){var t=u(["<g>\n      <line x1="," y1="," x2="," y2="," ...","/>\n      <line x1="," y1="," x2="," y2="," ...","/>\n    </g>"]);return on=function(){return t},t}var an=N.colors,sn={fill:"none",stroke:an.grey,"stroke-width":3,"stroke-linecap":"round","shape-rendering":"optimizeQuality"},un=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;return n(this,e),i=Object.assign({},sn,i),(t=s(this,o(e).call(this,i,r)))._length=35,t}return r(e,ct),i(e,[{key:"color",value:function(t){return this.attrs.stroke=an[t]||t,this}},{key:"from",value:function(t,n){this.set([this._data[0],[t,n]])}},{key:"length",value:function(t){return this._length=t,this}},{key:"width",value:function(t){return this.attrs["stroke-width"]=t,this}},{key:"path",value:function(){var t=this.points();return nt.line().x(function(t){return t[0]}).y(function(t){return t[1]}).curve(this.curve)(t)}},{key:"getLength",value:function(t,n){var e=t[0]-n[0],i=t[1]-n[1],r=Math.pow(e,2)+Math.pow(i,2);return r=Math.sqrt(r)}},{key:"getAngle",value:function(t,n){var e=t[0],i=t[1],r=n[0],o=n[1];return Math.atan2(o-i,r-e)}},{key:"head",value:function(t,n){var e=this.world.html,i=this.getAngle(t,n),r=i-Math.PI/4,o=i+Math.PI/4,a=this.getLength(t,n);a*=.2;var s=Math.sin(r)*a,u=Math.cos(r)*a,h=Math.sin(o)*a,c=Math.cos(o)*a;return e(on(),t[0],t[1],t[0]+u,t[1]+s,this.attrs,t[0],t[1],t[0]+c,t[1]+h,this.attrs)}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=this.points(),e=n[0],i=n[1];return i||(i=[e[0]-this._length,e[1]]),t(rn(),e[0],e[1],i[0],i[1],this.attrs,this.head(e,i))}}]),e}();function hn(){var t=u(["\n      <g>\n        <text ...",">\n          ","\n        </text>\n        <path ..."," id=",' style="','"/>\n      </g>\n    ']);return hn=function(){return t},t}var cn={fill:"none",stroke:N.colors.lighter,"stroke-width":2,"stroke-linecap":"round"},ln=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;n(this,e),i=Object.assign({},cn,i),(t=s(this,o(e).call(this,i,r)))._label="",t._y="-5%",t.dotted(!0);var a=Date.now();return t.set([[a,"0%"],[a,"100%"]]),t}return r(e,wt),i(e,[{key:"label",value:function(t){return this._label=t,this}},{key:"top",value:function(){this._y="-5%"}},{key:"bottom",value:function(){this._y="105%"}},{key:"build",value:function(){var t=this.world.html;this.onMount();var n=Object.assign({},this.attrs,{d:this.path()}),e={x:this.points()[0][0],y:this._y,fill:this.attrs.stroke,style:"text-anchor:middle;"};return t(hn(),e,this._label,n,this._id,this.drawSyle())}}]),e}();function fn(){var t=u(["<text ...",">\n          ","\n        </text>"]);return fn=function(){return t},t}var dn={stroke:"none",fill:N.colors.grey,"stroke-width":2,"stroke-linecap":"round","text-anchor":"middle",class:"somehow-legible"},yn=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;n(this,e);var a="";return"string"==typeof i&&(a=i,i={}),i=Object.assign({},dn,i),(t=s(this,o(e).call(this,i,r)))._title=a,t._y="-5%",t._x="50%",t.ignore_clip=!0,t}return r(e,jt),i(e,[{key:"extent",value:function(){return null}},{key:"label",value:function(t){return this._label=t,this}},{key:"color",value:function(t){return this.attrs.fill=t,this}},{key:"top",value:function(){return this._y="-15%",this}},{key:"bottom",value:function(){return this._y="115%",this}},{key:"left",value:function(){return this._x="15%",this.attrs["text-anchor"]="start",this}},{key:"right",value:function(){return this._x="95%",this.attrs["text-anchor"]="end",this}},{key:"build",value:function(){var t=this.world.html,n=Object.assign({},this.attrs,{x:this._x,y:this._y});return t(fn(),n,this._title)}}]),e}();function pn(){var t=u(["<svg ...",">\n      ","\n      ","\n    </svg>"]);return pn=function(){return t},t}function vn(){var t=u(["<style scoped>\n      .somehow-legible {\n        font-size: 14px;\n      }\n      @media (min-width: 300px) {\n        .somehow-legible {\n          font-size: 7px;\n        }\n      }\n      @media (min-width: 500px) {\n        .somehow-legible {\n          font-size: 5px;\n        }\n      }\n      @media (min-width: 600px) {\n        .somehow-legible {\n          font-size: 4px;\n        }\n      }\n      @media (min-width: 800px) {\n        .somehow-legible {\n          font-size: 3px;\n        }\n      }\n      @media (min-width: 1000px) {\n        .somehow-legible {\n          font-size: 2px;\n        }\n      }\n    </style>"]);return vn=function(){return t},t}var _n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n(this,t),this.width=100,this.height=100,e.aspect=e.aspect||"widescreen",e.aspect){this.aspect=e.aspect;var i=d({aspect:e.aspect,width:100});this.width=i.width||100,this.height=i.height||100}this.shapes=[],this.wiggle_room=1.05,this.x=new S(e,this),this.y=new P(e,this),this.xAxis=new V({},this),this.yAxis=new J({},this),this.html=y.bind(p),this.inputs=[],this.state={},this.state.time=Date.now(),this._title="",this.el=e.el||null,"string"==typeof this.el&&(this.el=document.querySelector(this.el))}return i(t,[{key:"bind",value:function(t){this.html=y.bind(t)}},{key:"line",value:function(t){var n=new wt(t,this);return this.shapes.push(n),n}},{key:"dot",value:function(t){var n=new Pt(t,this);return this.shapes.push(n),n}},{key:"text",value:function(t){var n=new jt(t,this);return this.shapes.push(n),n}},{key:"area",value:function(t){var n=new vt(t,this);return this.shapes.push(n),n}},{key:"midArea",value:function(t){var n=new Zt(t,this);return this.shapes.push(n),n}},{key:"rect",value:function(t){var n=new xt(t,this);return this.shapes.push(n),n}},{key:"bar",value:function(t){var n=new Kt(t,this);return this.shapes.push(n),n}},{key:"annotation",value:function(t){var n=new Bt(t,this);return this.shapes.push(n),n}},{key:"image",value:function(t){var n=new en(t,this);return this.shapes.push(n),n}},{key:"arrow",value:function(t){var n=new un(t,this);return this.shapes.push(n),n}},{key:"now",value:function(t){var n=new ln(t,this);return this.shapes.push(n),n}},{key:"title",value:function(t){var n=new yn(t,this);return this.shapes.push(n),n}},{key:"shape",value:function(t){var n=new ct(t,this);return this.shapes.push(n),n}},{key:"getShape",value:function(t){return this.shapes.find(function(n){return n.id===t||n._id===t})}},{key:"redraw",value:function(){this.el?this.el.innerHTML=this.build():console.log("must define world html element")}},{key:"breakpoints",value:function(){return this.html(vn())}},{key:"clip",value:function(){return this.x.clip(),this.y.clip(),this}},{key:"build",value:function(){var t=this.html,n=this.shapes.sort(function(t,n){return t._order>n._order?1:-1});n=T(n,this.x,this.y);var e=[];this.xAxis&&e.push(this.xAxis.build()),this.yAxis&&e.push(this.yAxis.build()),e=e.concat(n.map(function(t){return t.build()}));var i={viewBox:"0,0,".concat(this.width,",").concat(this.height),preserveAspectRatio:"xMidYMid meet",style:"overflow:visible; margin: 10px 20px 25px 25px;"};return t(pn(),i,this.breakpoints(),e)}}]),t}();Object.keys(z).forEach(function(t){_n.prototype[t]=z[t]});var mn={plusminus:"plusMinus"};Object.keys(mn).forEach(function(t){_n.prototype[t]=z[mn[t]]});var gn=_n,xn=function(t){return new gn(t)};return xn.version="0.2.0",xn});
